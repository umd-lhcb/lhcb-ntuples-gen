
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://umd-lhcb.github.io/lhcb-ntuples-gen/software_manuals/git_annex/">
      
      
        <link rel="prev" href="../../ntupling/nomenclature/">
      
      
        <link rel="next" href="../davinci/docker_image_usage/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.2">
    
    
      
        <title>git-annex - lhcb-ntuples-gen wiki</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7bf56d0a.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#initialize-git-annex-repository" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="lhcb-ntuples-gen wiki" class="md-header__button md-logo" aria-label="lhcb-ntuples-gen wiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            lhcb-ntuples-gen wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              git-annex
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/umd-lhcb/lhcb-ntuples-gen" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    umd-lhcb/lhcb-ntuples-gen
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="lhcb-ntuples-gen wiki" class="md-nav__button md-logo" aria-label="lhcb-ntuples-gen wiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    lhcb-ntuples-gen wiki
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/umd-lhcb/lhcb-ntuples-gen" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    umd-lhcb/lhcb-ntuples-gen
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Ntupling
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Ntupling
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ntupling/installation/" class="md-nav__link">
        Installing dependencies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ntupling/step1_davinci/" class="md-nav__link">
        Step 1 ntuples with Davinci
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ntupling/step2_babymaker/" class="md-nav__link">
        Step 2 ntuples with babymaker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ntupling/grid_job/" class="md-nav__link">
        Submitting DaVinci jobs to GRID
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ntupling/dev/" class="md-nav__link">
        Developing this project
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ntupling/nomenclature/" class="md-nav__link">
        Nomenclature
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Software
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Software
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          git-annex
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        git-annex
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#initialize-git-annex-repository" class="md-nav__link">
    Initialize git-annex repository
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-files" class="md-nav__link">
    Add files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#change-the-content-of-annexed-files" class="md-nav__link">
    Change the content of annexed files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#change-the-name-of-annexed-files" class="md-nav__link">
    Change the name of annexed files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#synchronize-files-between-local-and-remote-repositories" class="md-nav__link">
    Synchronize files between local and remote repositories
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#download-and-upload-individual-files" class="md-nav__link">
    Download and upload individual files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#drop-local-files" class="md-nav__link">
    Drop local files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#check-annexed-file-size" class="md-nav__link">
    Check annexed file size
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#check-annexed-file-availability" class="md-nav__link">
    Check annexed file availability
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          DaVinci
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          DaVinci
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../davinci/docker_image_usage/" class="md-nav__link">
        Docker image usage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../davinci/tips_and_tricks/" class="md-nav__link">
        Tips and tricks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../davinci/loki_functors/" class="md-nav__link">
        LoKi functors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../davinci/tuple_tools/" class="md-nav__link">
        TupleTools
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nix/nix/" class="md-nav__link">
        nix
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../root/" class="md-nav__link">
        Compiling ROOT
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bender/" class="md-nav__link">
        bender
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dirac/" class="md-nav__link">
        DIRAC
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lxplus/" class="md-nav__link">
        Tips for lxplus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../external/" class="md-nav__link">
        External manuals
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Physics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Physics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../physics/momentum_scaling/" class="md-nav__link">
        Momentum scaling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../physics/wrong_sign_particles/" class="md-nav__link">
        Wrong-sign particles
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../physics/b0_oscillation/" class="md-nav__link">
        B0 oscillation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../physics/track_chi2ndof_data_mc_inconsistency/" class="md-nav__link">
        Track χ²/DOF inconsistency in run 2 data-MC
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../physics/transverse_energy/" class="md-nav__link">
        Transverse energy
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Technical concepts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Technical concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../technical_concepts/truth_matching/" class="md-nav__link">
        Truth matching
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/data_management/" class="md-nav__link">
        Data management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/data_sources/" class="md-nav__link">
        Data sources
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
      
      
      
        <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
          Cutflows
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_3">
          <span class="md-nav__icon md-icon"></span>
          Cutflows
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/cutflows/RDX_run1_phoebe_vs_us/" class="md-nav__link">
        RDX validation cutflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/cutflows/RDst_run1_vs_run2/overview/" class="md-nav__link">
        R(D*) cutflow overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/cutflows/RDst_run1_vs_run2/detail/" class="md-nav__link">
        R(D*) cutflow detail
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/cutflows/RDst_refit_Dst_only_vs_full_refit/" class="md-nav__link">
        R(D*) cutflow to study the effect of refit D* only
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
      
      
      
        <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
          Comparisons
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_4">
          <span class="md-nav__icon md-icon"></span>
          Comparisons
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/comparison/RDst_vars_run1/RDst_vars_run1/" class="md-nav__link">
        R(D*) variables, run 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/comparison/RDst_step2_cuts_validation/RDst_step2_cuts_validation/" class="md-nav__link">
        R(D*) run 1 step-2 cuts validation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/comparison/trigger_lines/" class="md-nav__link">
        Trigger lines
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#initialize-git-annex-repository" class="md-nav__link">
    Initialize git-annex repository
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-files" class="md-nav__link">
    Add files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#change-the-content-of-annexed-files" class="md-nav__link">
    Change the content of annexed files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#change-the-name-of-annexed-files" class="md-nav__link">
    Change the name of annexed files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#synchronize-files-between-local-and-remote-repositories" class="md-nav__link">
    Synchronize files between local and remote repositories
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#download-and-upload-individual-files" class="md-nav__link">
    Download and upload individual files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#drop-local-files" class="md-nav__link">
    Drop local files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#check-annexed-file-size" class="md-nav__link">
    Check annexed file size
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#check-annexed-file-availability" class="md-nav__link">
    Check annexed file availability
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>git-annex</h1>

<p>It is harder to manage large (100 MB or more) files in <code>git</code>, as checking them
in/out would take a much longer time. Also, it is undesirable to expose raw
data outside of the collaboration.</p>
<p>We use a <code>git</code> addon, <code>git-annex</code>, to manage large files. <code>git-annex</code> stores all
tracked files under <code>&lt;project_root&gt;/.git/annex</code>, and link/copy these files to
the expected locations.</p>
<h2 id="initialize-git-annex-repository">Initialize <code>git-annex</code> repository</h2>
<div class="admonition info">
<p class="admonition-title">Before you proceed</p>
<p>This needs to be done <strong>only once</strong> for each repository!</p>
</div>
<p>We have a private server<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup> that hosts <code>git</code> repositories with <code>git-annex</code>
capabilities.
After cloning the <code>umd-lhcb/lhcb-ntuples-gen</code> repository from github, add our private repository:
<div class="highlight"><pre><span></span><code>git remote add julian git@129.2.92.92:lhcb-ntuples-gen
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please send us a SSH key so that we can give your read/write permission on
the <code>git-annex</code> repository.</p>
</div>
<p>Then we need to initialize the <code>annex</code> component:
<div class="highlight"><pre><span></span><code>git annex init --version=7
</code></pre></div></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is important to use a <code>git-annex</code> repository of <code>v7</code> or newer!<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup></p>
<p>To upgrade your <code>git-annex</code> repository to at least <code>v7</code>, issue the
following command inside your <code>git</code> repository:
<div class="highlight"><pre><span></span><code>git annex upgrade
</code></pre></div></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Dropbox will not synchronize any symbolic links, so if the repository is
placed within your Dropbox folder, and you have multiple computers, the
symbolic links will be replaced by the actual files on all but the initial
computers.</p>
</div>
<h2 id="add-files">Add files</h2>
<p>If you are adding large files that are unlikely to change in the future, such
as <code>.dst</code> data files, use the following command:
<div class="highlight"><pre><span></span><code>git annex add &lt;path_to_file&gt;
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>You typically don't need this. It is left here for completeness.</strong></p>
<p><code>git add</code> will add files to the <code>git</code> repository, <strong>not</strong> <code>git-annex</code>
repository <strong>by default</strong>. Configuration is required to add only <code>.root</code>
files to <code>git-annex</code>, and the rest to <code>git</code>. This has been done for this
repository, in:
<div class="highlight"><pre><span></span><code>&lt;project_root&gt;/.gitattributes
</code></pre></div></p>
<p>See <a href="https://git-annex.branchable.com/tips/largefiles/">this article</a>
for more information on configuring <code>.gitattributes</code>.</p>
</div>
<h2 id="change-the-content-of-annexed-files">Change the content of annexed files</h2>
<p>Files added via <code>git annex add</code> are read only. For example:
<div class="highlight"><pre><span></span><code>echo change &gt; &lt;path_to_annexed_file&gt;
&gt; bash: &lt;annexed_file&gt;: Permission denied
</code></pre></div></p>
<p>To change them, we need to unlock them first:
<div class="highlight"><pre><span></span><code>git annex unlock &lt;path_to_annexed_file&gt;
</code></pre></div></p>
<p>Now you can edit the unlocked file as you wish. After editing, use
<code>git annex add</code> to keep the changes and lock it again.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When you commit, <code>git-annex</code> will notice that you are committing an
unlocked file, add its new content.
A pointer to that content is what gets committed to <code>git</code>; the actual
content will go to <code>git-annex</code>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you don't need to modify the file after all, or want to discard
modifications, use <code>git annex lock</code>.
Doing so will result in all modifications discarded. Proceed with care!</p>
</div>
<p>Files added via <code>git add</code> can be changed just like a regular file.</p>
<h2 id="change-the-name-of-annexed-files">Change the name of annexed files</h2>
<p>Once a file has been annexed with <code>git annex add</code>, the actual file will be
moved automatically by <code>git-annex</code> inside <code>.git</code> folder in your project, and
<code>git-annex</code> will create a symbolic link in-place pointing to that file.</p>
<p>So, if you just want to <strong>rename</strong> the annexed file, <strong>without changing its
content</strong>, just view that symbolic link as a regular file added to <code>git</code>.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Consider the following example:</p>
<ol>
<li>Place <code>a.root</code> in <code>folderA/a.root</code>.</li>
<li>Annex the file with:
    <div class="highlight"><pre><span></span><code>git annex add folderA/a.root
</code></pre></div></li>
<li>Now <code>folderA/a.root</code> will be just a symbolic link, and the actual root
   file is placed in <code>.git</code> in your project root</li>
<li>Suppose you want to rename <code>a.root</code> to <code>b.root</code>. In this case, you can:
    <div class="highlight"><pre><span></span><code>mv folderA/a.root folderA/b.root
git add folderA/a.root folderA/b.root  # &lt;-- We are not using annex here!!!
git commit -a
</code></pre></div></li>
</ol>
</div>
<h2 id="synchronize-files-between-local-and-remote-repositories">Synchronize files between local and remote repositories</h2>
<p>First check that you have committed all changes:
<div class="highlight"><pre><span></span><code>git status
</code></pre></div></p>
<p>Make sure <strong>NO</strong> entry looks like this:
<div class="highlight"><pre><span></span><code>changes not staged for commit
</code></pre></div></p>
<p>If there are uncommitted local changes, commit then and write sensible
messages. This way, <code>git annex sync</code> won't make unwanted commits!</p>
<div class="admonition info">
<p class="admonition-title">Before you proceed</p>
<p>Do <code>git pull origin master</code> to get latest changes from <code>origin</code> first.</p>
</div>
<p>Now, you can do this:
<div class="highlight"><pre><span></span><code>git annex sync
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The command above doesn't download the actual data; rather, it only download
the metadata so that <code>git annex</code> <em>knows</em> how to download the actual data.</p>
<p>The command above will also make sure your local <code>master</code> is now identical
to remote <code>master</code>. That's why it's better to do <code>git pull origin master</code>
beforehand to avoid surprises.</p>
</div>
<div class="admonition error">
<p class="admonition-title">Error</p>
<p>By default, <code>git annex sync</code> will commit <strong>all previously uncommitted</strong>
changes before synchronizing!</p>
<p>This can be disabled on a per-repository basis by:
<div class="highlight"><pre><span></span><code>git annex config --set annex.autocommit false
</code></pre></div></p>
<p>Other clones will also be configured properly after they do a:
<code>git annex sync</code>.</p>
</div>
<p>If you want to download <strong>every single file</strong> from the <code>git-annex</code> repo (which is
probably a couple of GBs), add the <code>--content</code> flag in the second step and
download not only the metadata, but also the data:
<div class="highlight"><pre><span></span><code>git annex sync --content julian
</code></pre></div></p>
<h2 id="download-and-upload-individual-files">Download and upload individual files</h2>
<p>Downloading is simple:
<div class="highlight"><pre><span></span><code>git annex get &lt;path_to_files&gt;
</code></pre></div></p>
<p>So is uploading:
<div class="highlight"><pre><span></span><code>git annex copy --to julian &lt;path_to_files&gt;
git annex sync
</code></pre></div></p>
<h2 id="drop-local-files">Drop local files</h2>
<p>The following command will remove the local copy of the file <strong>only</strong>, and will
not delete the file from remote<sup id="fnref:3"><a class="footnote-ref" href="#fn:3">3</a></sup>:
<div class="highlight"><pre><span></span><code>git annex drop &lt;path_to_files&gt;
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>git</code> would still think the working directory is clean, i.e. no change has
been made.</p>
</div>
<h2 id="check-annexed-file-size">Check annexed file size</h2>
<p>For a single file this can be done via <code>git annex info</code>. For example:
<div class="highlight"><pre><span></span><code>$ git annex info ntuples/pre-0.9.0/Dst-std/Dst--19_09_05--std--data--2012--md.root
file: ntuples/pre-0.9.0/Dst-std/Dst--19_09_05--std--data--2012--md.root
size: 1.8 gigabytes
key: SHA256E-s1800364650--cb5222668f21032b81ede5f18eb86026e21188c54441917258e8aad4d072f791.root
present: false
</code></pre></div></p>
<p>For directories, we have a home-made wrapper script <code>scripts/count_root_files.py</code>. For example:
<div class="highlight"><pre><span></span><code>$ ./scripts/count_root_files.py ntuples
   2 .root   total: 171.30 MiB   local:   0.00 KiB   ntuples/0.9.1-partial_refit
   2 .root   total: 171.30 MiB   local:   0.00 KiB   ntuples/0.9.1-partial_refit/Dst_D0-cutflow_mc
   5 .root   total:  47.49 GiB   local:   0.00 KiB   ntuples/ref-rdx-run1
   1 .root   total: 397.92 MiB   local:   0.00 KiB   ntuples/ref-rdx-run1/Dst-mc
   1 .root   total:  29.62 GiB   local:   0.00 KiB   ntuples/ref-rdx-run1/D0-mix
   1 .root   total:   1.70 GiB   local:   0.00 KiB   ntuples/ref-rdx-run1/Dst-std
   1 .root   total:   1.60 GiB   local:   0.00 KiB   ntuples/ref-rdx-run1/D0-std
   1 .root   total:  14.18 GiB   local:   0.00 KiB   ntuples/ref-rdx-run1/Dst-mix
   2 .root   total:   0.98 GiB   local:   0.00 KiB   ntuples/0.9.0-cutflow
   2 .root   total:   0.98 GiB   local:   0.00 KiB   ntuples/0.9.0-cutflow/Dst-cutflow_mc
   7 .root   total:  37.90 GiB   local:   0.00 KiB   ntuples/pre-0.9.0
   2 .root   total:  46.24 MiB   local:   0.00 KiB   ntuples/pre-0.9.0/Dst-cutflow_mc
   2 .root   total:  17.50 GiB   local:   0.00 KiB   ntuples/pre-0.9.0/Dst-cutflow_data
   1 .root   total: 179.56 MiB   local:   0.00 KiB   ntuples/pre-0.9.0/Dst-mc
   2 .root   total:  20.19 GiB   local:   0.00 KiB   ntuples/pre-0.9.0/Dst-std
</code></pre></div></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>If you are in the <code>nix</code> shell, <code>count_root_files.py</code> is added to PATH so
you can call it directly.</p>
</div>
<h2 id="check-annexed-file-availability">Check annexed file availability</h2>
<p>We can use <code>git annex list</code> for this. For example:
<div class="highlight"><pre><span></span><code>$ git annex list ntuples/0.9.0-cutflow
here
|Julian
||origin
|||web
||||bittorrent
|||||
_X___ ntuples/0.9.0-cutflow/Dst-cutflow_mc/Dst--20_06_05--cutflow_mc--bare--MC_2011_Beam3500GeV-2011-MagDown-Nu2-Pythia8_Sim08h_Digi13_Trig0x40760037_Reco14c_Stripping20r1NoPrescalingFlagged_11874091_ALLSTREAMS.DST.root
_X___ ntuples/0.9.0-cutflow/Dst-cutflow_mc/Dst--20_06_05--cutflow_mc--bare--MC_2016_Beam6500GeV-2016-MagDown-Nu1.6-25ns-Pythia8_Sim09b_Trig0x6138160F_Reco16_Turbo03_Stripping26NoPrescalingFlagged_11874091_ALLSTREAMS.DST.root
</code></pre></div></p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>As of now, the server is sitting on Yipeng's desktop. It is named
  <code>Julian</code>, after <a href="https://en.wikipedia.org/wiki/Julian_Schwinger">Julian Schwinger</a>.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>Please read <a href="https://git-annex.branchable.com/tips/unlocked_files/">this</a> for the rationale.&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p><strong>Deleting files from remote is dangerous!</strong> As the remote might be the
  last copy of the file so we may lose the file permanently.</p>
<p>Still, if you insist, please refer to the <a href="https://git-annex.branchable.com/tips/deleting_unwanted_files">official guide</a>.&#160;<a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
</ol>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fc8c2696.min.js"></script>
      
        <script src="../../javascripts/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>