{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to the wiki for lhcb-ntuples-gen , the repository that generates the ntuples for the R(D^{(*)}) R(D^{(*)}) UMD analysis. In this section, you'll find useful information for installing the required dependencies for this project, as well as the usage of some tools, such as git-annex , that will be used in this project. Ntuple generation The ntuples 1 generation is separated into 2 steps : Use DaVinci to generate ntuples from raw data 2 . Follow this section to install required programs. Use this manual to learn how to use DaVinci locally. Use babymaker frame work to do slimming, skimming, and additional calculation on previous ntuples, generating new ntuples. Use this section for installation. The babymaker manual can be found here . Note These two steps have separate dependencies. If you only need to run one step, just follow the installation instruction for that particular step. Modifying this wiki This wiki is written in a series of markdown files ( .md ) committed to the docs folder of the lhcb-ntuples-gen repository. The structure of the wiki is defined in mkdocs.yml . This file contains the title of each page in the wiki, and the markdown file that defines that page. To modify the wiki just modify mkdocs.yml or the .md files, and commit the changes to the repo. In about a minute Travis will deploy the new website to https://umd-lhcb.github.io/lhcb-ntuples-gen/ . To view the website locally (for instance, before committing), you will need to install mkdocs and the material theme pip3 install --user -r docs/requirements.txt Then, from lhcb-ntuples-gen you generate the website at the local address http://127.0.0.1:8000 with the command mkdocs serve Version control systems (VCS) This project requires the following VCS to be installed in your system: git : for source code version control git-annex (that supports v7 repository format): for data file version control To install these programs, please follow this section . In addition, we provide a brief introduction on the usage of git-annex . .root files that can be processed by DaVinci , ROOT , and many other tools. \u21a9 .dst files that directly come from CERN. \u21a9","title":"Getting started"},{"location":"#ntuple-generation","text":"The ntuples 1 generation is separated into 2 steps : Use DaVinci to generate ntuples from raw data 2 . Follow this section to install required programs. Use this manual to learn how to use DaVinci locally. Use babymaker frame work to do slimming, skimming, and additional calculation on previous ntuples, generating new ntuples. Use this section for installation. The babymaker manual can be found here . Note These two steps have separate dependencies. If you only need to run one step, just follow the installation instruction for that particular step.","title":"Ntuple generation"},{"location":"#modifying-this-wiki","text":"This wiki is written in a series of markdown files ( .md ) committed to the docs folder of the lhcb-ntuples-gen repository. The structure of the wiki is defined in mkdocs.yml . This file contains the title of each page in the wiki, and the markdown file that defines that page. To modify the wiki just modify mkdocs.yml or the .md files, and commit the changes to the repo. In about a minute Travis will deploy the new website to https://umd-lhcb.github.io/lhcb-ntuples-gen/ . To view the website locally (for instance, before committing), you will need to install mkdocs and the material theme pip3 install --user -r docs/requirements.txt Then, from lhcb-ntuples-gen you generate the website at the local address http://127.0.0.1:8000 with the command mkdocs serve","title":"Modifying this wiki"},{"location":"#version-control-systems-vcs","text":"This project requires the following VCS to be installed in your system: git : for source code version control git-annex (that supports v7 repository format): for data file version control To install these programs, please follow this section . In addition, we provide a brief introduction on the usage of git-annex . .root files that can be processed by DaVinci , ROOT , and many other tools. \u21a9 .dst files that directly come from CERN. \u21a9","title":"Version control systems (VCS)"},{"location":"data/cut_flows/","text":"R(D^{*}) R(D^{*}) cut flow comparison between run 1 and 2 Generation steps Extract DaVinci-level cut efficiencies with davinci_log_parser.py : ./davinci_log_parser.py <output_yaml_filename> <input_log1> <input_log2> ... Run the cut_flow-run1.py and cut_flow-run2.py . Note that all required files are hard-coded in the scripts. Generate cut flow table with: make cutflow-RDst Please refer to the Makefile on the implementation details. Cut flow table with cocktail MC cut name run 1 yield run 2 yield run 1 efficiency run 2 efficiency double ratio Total events 502736 520046 - - - Stripped D^0 \\mu^- D^0 \\mu^- 10422 13807 0.02073\u00b10.00020 0.02655\u00b10.00022 1.281\u00b10.016 D^0 \\rightarrow K^- \\pi^+ D^0 \\rightarrow K^- \\pi^+ (tigter K \\pi K \\pi ) 10080 13398 0.9672\u00b10.0018 0.9704\u00b10.0015 1.0033\u00b10.0025 D^{*+} \\rightarrow D^0 \\pi^+ D^{*+} \\rightarrow D^0 \\pi^+ 5987 7893 0.5939\u00b10.0049 0.5891\u00b10.0043 0.992\u00b10.011 \\bar{B}^0 \\rightarrow D^{*+} \\mu^- \\bar{B}^0 \\rightarrow D^{*+} \\mu^- 5498 6454 0.9183\u00b10.0037 0.8177\u00b10.0044 0.8904\u00b10.0060 Refit \\bar{B}^0 \\bar{B}^0 decay tre 5197 6139 0.9453\u00b10.0032 0.9512\u00b10.0028 1.0063\u00b10.0045 L0 2587 3687 0.4465\u00b10.0066 0.5472\u00b10.0061 1.226\u00b10.023 Hlt1 1882 3687 0.7275\u00b10.0090 1.00000\u00b10.00050 1.375\u00b10.017 Hlt2 1282 3687 0.681\u00b10.011 1.00000\u00b10.00050 1.468\u00b10.024 \\mu \\mu PID 1282 3437 1.0000\u00b10.0014 0.9322\u00b10.0044 0.9322\u00b10.0046 \\text{IsoBDT}_{\\Upsilon(\\text{4s})} < 0.15 \\text{IsoBDT}_{\\Upsilon(\\text{4s})} < 0.15 977 2517 0.762\u00b10.012 0.7323\u00b10.0077 0.961\u00b10.019 m_{\\Upsilon(\\text{4s})} < 5280 m_{\\Upsilon(\\text{4s})} < 5280 977 2515 1.0000\u00b10.0019 0.9992\u00b10.0010 0.9992\u00b10.0021 Total ratio - - 0.001943\u00b10.000064 0.004836\u00b10.000098 2.489\u00b10.096 Note With run 1 DaVinci script plus the run 2 stripping condition, we find 2016 (run 2 year) ntuple contains ~5x candidates than that of 2012 (run 1 year). See released figures in this project . The luminosity between 2016 and 2012 are similar. We figured this out with DaVinci and DIRAC. We have a factor of 2 from the cross section. See this paper This leaves a factor of 2.5. We are expecting ~1.7. Cut flow generated with very similar script and cocktail MC data agrees with the result from real data . This table uses full MagDown run 1 and 2 cocktail MC. Info Run 1 stripping conditions can be found at Strippingb2D0MuXB2DMuNuForTauMuLine Run 2 stripping conditions can be found at Strippingb2D0MuXB2DMuForTauMuLine Cut flow table with real data cut name run 1 yield run 2 yield run 1 efficiency run 2 efficiency double ratio Total events 129986930 486980122 - - - Stripped D^0 \\mu^- D^0 \\mu^- 7576232 35543709 0.058285\u00b10.000020 0.072988\u00b10.000012 1.25227\u00b10.00048 D^0 \\rightarrow K^- \\pi^+ D^0 \\rightarrow K^- \\pi^+ (tigter K \\pi K \\pi ) 7574988 35529720 0.9998358\u00b10.0000048 0.9996064\u00b10.0000033 0.9997706\u00b10.0000058 D^{*+} \\rightarrow D^0 \\pi^+ D^{*+} \\rightarrow D^0 \\pi^+ 1642940 7337335 0.21689\u00b10.00015 0.206513\u00b10.000068 0.95215\u00b10.00072 \\bar{B}^0 \\rightarrow D^{*+} \\mu^- \\bar{B}^0 \\rightarrow D^{*+} \\mu^- 1190313 4510320 0.72450\u00b10.00035 0.61471\u00b10.00018 0.84846\u00b10.00048 Refit \\bar{B}^0 \\bar{B}^0 decay tree 1110480 4117698 0.93293\u00b10.00023 0.91295\u00b10.00013 0.97858\u00b10.00028 L0 674011 3047616 0.54226\u00b10.00044 0.63643\u00b10.00022 1.1736\u00b10.0010 Hlt1 533012 3047614 0.79081\u00b10.00049 0.99999934\u00b10.00000086 1.26453\u00b10.00079 Hlt2 385887 3047610 0.72397\u00b10.00061 0.9999987\u00b10.0000010 1.3813\u00b10.0012 \\mu \\mu PID 385887 2019777 1.0000000\u00b10.0000047 0.66274\u00b10.00027 0.66274\u00b10.00027 \\text{IsoBDT}_{\\Upsilon(\\text{4s})} < 0.15 \\text{IsoBDT}_{\\Upsilon(\\text{4s})} < 0.15 264931 1329826 0.68655\u00b10.00074 0.65840\u00b10.00033 0.9590\u00b10.0011 m_{\\Upsilon(\\text{4s})} < 5280 m_{\\Upsilon(\\text{4s})} < 5280 261200 1310660 0.98592\u00b10.00023 0.98559\u00b10.00010 0.99967\u00b10.00026 Total ratio - - 0.0020094\u00b10.0000039 0.0026914\u00b10.0000023 1.3394\u00b10.0029 Note This table uses full MagDown 2012 and 2016 real data. The ntuples used to generated the comparison plot have 258438 (2012) and 1218948 (2016) events. The main differences between the cut flow ntuples and the plotting ntuples are: Cut flow ntuples use stripping line \\mu \\mu but plotting ntuples use all available \\mu \\mu . Cut flow ntuples contain additional Hlt1 cuts.","title":"Cut flows"},{"location":"data/cut_flows/#rdrd-cut-flow-comparison-between-run-1-and-2","text":"","title":"R(D^{*})R(D^{*}) cut flow comparison between run 1 and 2"},{"location":"data/cut_flows/#generation-steps","text":"Extract DaVinci-level cut efficiencies with davinci_log_parser.py : ./davinci_log_parser.py <output_yaml_filename> <input_log1> <input_log2> ... Run the cut_flow-run1.py and cut_flow-run2.py . Note that all required files are hard-coded in the scripts. Generate cut flow table with: make cutflow-RDst Please refer to the Makefile on the implementation details.","title":"Generation steps"},{"location":"data/cut_flows/#cut-flow-table-with-cocktail-mc","text":"cut name run 1 yield run 2 yield run 1 efficiency run 2 efficiency double ratio Total events 502736 520046 - - - Stripped D^0 \\mu^- D^0 \\mu^- 10422 13807 0.02073\u00b10.00020 0.02655\u00b10.00022 1.281\u00b10.016 D^0 \\rightarrow K^- \\pi^+ D^0 \\rightarrow K^- \\pi^+ (tigter K \\pi K \\pi ) 10080 13398 0.9672\u00b10.0018 0.9704\u00b10.0015 1.0033\u00b10.0025 D^{*+} \\rightarrow D^0 \\pi^+ D^{*+} \\rightarrow D^0 \\pi^+ 5987 7893 0.5939\u00b10.0049 0.5891\u00b10.0043 0.992\u00b10.011 \\bar{B}^0 \\rightarrow D^{*+} \\mu^- \\bar{B}^0 \\rightarrow D^{*+} \\mu^- 5498 6454 0.9183\u00b10.0037 0.8177\u00b10.0044 0.8904\u00b10.0060 Refit \\bar{B}^0 \\bar{B}^0 decay tre 5197 6139 0.9453\u00b10.0032 0.9512\u00b10.0028 1.0063\u00b10.0045 L0 2587 3687 0.4465\u00b10.0066 0.5472\u00b10.0061 1.226\u00b10.023 Hlt1 1882 3687 0.7275\u00b10.0090 1.00000\u00b10.00050 1.375\u00b10.017 Hlt2 1282 3687 0.681\u00b10.011 1.00000\u00b10.00050 1.468\u00b10.024 \\mu \\mu PID 1282 3437 1.0000\u00b10.0014 0.9322\u00b10.0044 0.9322\u00b10.0046 \\text{IsoBDT}_{\\Upsilon(\\text{4s})} < 0.15 \\text{IsoBDT}_{\\Upsilon(\\text{4s})} < 0.15 977 2517 0.762\u00b10.012 0.7323\u00b10.0077 0.961\u00b10.019 m_{\\Upsilon(\\text{4s})} < 5280 m_{\\Upsilon(\\text{4s})} < 5280 977 2515 1.0000\u00b10.0019 0.9992\u00b10.0010 0.9992\u00b10.0021 Total ratio - - 0.001943\u00b10.000064 0.004836\u00b10.000098 2.489\u00b10.096 Note With run 1 DaVinci script plus the run 2 stripping condition, we find 2016 (run 2 year) ntuple contains ~5x candidates than that of 2012 (run 1 year). See released figures in this project . The luminosity between 2016 and 2012 are similar. We figured this out with DaVinci and DIRAC. We have a factor of 2 from the cross section. See this paper This leaves a factor of 2.5. We are expecting ~1.7. Cut flow generated with very similar script and cocktail MC data agrees with the result from real data . This table uses full MagDown run 1 and 2 cocktail MC. Info Run 1 stripping conditions can be found at Strippingb2D0MuXB2DMuNuForTauMuLine Run 2 stripping conditions can be found at Strippingb2D0MuXB2DMuForTauMuLine","title":"Cut flow table with cocktail MC"},{"location":"data/cut_flows/#cut-flow-table-with-real-data","text":"cut name run 1 yield run 2 yield run 1 efficiency run 2 efficiency double ratio Total events 129986930 486980122 - - - Stripped D^0 \\mu^- D^0 \\mu^- 7576232 35543709 0.058285\u00b10.000020 0.072988\u00b10.000012 1.25227\u00b10.00048 D^0 \\rightarrow K^- \\pi^+ D^0 \\rightarrow K^- \\pi^+ (tigter K \\pi K \\pi ) 7574988 35529720 0.9998358\u00b10.0000048 0.9996064\u00b10.0000033 0.9997706\u00b10.0000058 D^{*+} \\rightarrow D^0 \\pi^+ D^{*+} \\rightarrow D^0 \\pi^+ 1642940 7337335 0.21689\u00b10.00015 0.206513\u00b10.000068 0.95215\u00b10.00072 \\bar{B}^0 \\rightarrow D^{*+} \\mu^- \\bar{B}^0 \\rightarrow D^{*+} \\mu^- 1190313 4510320 0.72450\u00b10.00035 0.61471\u00b10.00018 0.84846\u00b10.00048 Refit \\bar{B}^0 \\bar{B}^0 decay tree 1110480 4117698 0.93293\u00b10.00023 0.91295\u00b10.00013 0.97858\u00b10.00028 L0 674011 3047616 0.54226\u00b10.00044 0.63643\u00b10.00022 1.1736\u00b10.0010 Hlt1 533012 3047614 0.79081\u00b10.00049 0.99999934\u00b10.00000086 1.26453\u00b10.00079 Hlt2 385887 3047610 0.72397\u00b10.00061 0.9999987\u00b10.0000010 1.3813\u00b10.0012 \\mu \\mu PID 385887 2019777 1.0000000\u00b10.0000047 0.66274\u00b10.00027 0.66274\u00b10.00027 \\text{IsoBDT}_{\\Upsilon(\\text{4s})} < 0.15 \\text{IsoBDT}_{\\Upsilon(\\text{4s})} < 0.15 264931 1329826 0.68655\u00b10.00074 0.65840\u00b10.00033 0.9590\u00b10.0011 m_{\\Upsilon(\\text{4s})} < 5280 m_{\\Upsilon(\\text{4s})} < 5280 261200 1310660 0.98592\u00b10.00023 0.98559\u00b10.00010 0.99967\u00b10.00026 Total ratio - - 0.0020094\u00b10.0000039 0.0026914\u00b10.0000023 1.3394\u00b10.0029 Note This table uses full MagDown 2012 and 2016 real data. The ntuples used to generated the comparison plot have 258438 (2012) and 1218948 (2016) events. The main differences between the cut flow ntuples and the plotting ntuples are: Cut flow ntuples use stripping line \\mu \\mu but plotting ntuples use all available \\mu \\mu . Cut flow ntuples contain additional Hlt1 cuts.","title":"Cut flow table with real data"},{"location":"data/data_management/","text":"Split book-keeping files The .dst description files downloaded directly from Dirac contains a list with a large number of files (700 files or more). For example, this file contains 1690 lines: /lhcb/LHCb/Collision12/SEMILEPTONIC.DST/00067251/0000/00067251_00001536_1.Semileptonic.dst /lhcb/LHCb/Collision12/SEMILEPTONIC.DST/00067251/0000/00067251_00001039_1.Semileptonic.dst /lhcb/LHCb/Collision12/SEMILEPTONIC.DST/00067251/0000/00067251_00000344_1.Semileptonic.dst /lhcb/LHCb/Collision12/SEMILEPTONIC.DST/00067251/0000/00067251_00000301_1.Semileptonic.dst /lhcb/LHCb/Collision12/SEMILEPTONIC.DST/00067251/0000/00067251_00000850_1.Semileptonic.dst /lhcb/LHCb/Collision12/SEMILEPTONIC.DST/00067251/0000/00067251_00000988_1.Semileptonic.dst /lhcb/LHCb/Collision12/SEMILEPTONIC.DST/00067251/0000/00067251_00001423_1.Semileptonic.dst /lhcb/LHCb/Collision12/SEMILEPTONIC.DST/00067251/0000/00067251_00000841_1.Semileptonic.dst ... /lhcb/LHCb/Collision12/SEMILEPTONIC.DST/00067251/0000/00067251_00001096_1.Semileptonic.dst It is impractical to download every single one of them, as we don't have enough storage space in lxplus , even with EOS . To split, we use split , a linux tool that should have been installed by default: split --lines=50 <filename.txt> In this case, the <filename.txt> will be sliced for every 50 lines, and the output filenames will be x?? . Download data files with lxplus To download all dst files listed in a bookkeeping file: lhcb-proxy-init lb-run LHCbDIRAC dirac-dms-get-file -D <target_dir> --File <file_with_list_of_lfns> If you know a LFN , instead of a file that contains a list of LFN s, you can: lb-run LHCbDIRAC dirac-dms-get-file -D <target_dir> -l <lfn>","title":"Data management"},{"location":"data/data_management/#split-book-keeping-files","text":"The .dst description files downloaded directly from Dirac contains a list with a large number of files (700 files or more). For example, this file contains 1690 lines: /lhcb/LHCb/Collision12/SEMILEPTONIC.DST/00067251/0000/00067251_00001536_1.Semileptonic.dst /lhcb/LHCb/Collision12/SEMILEPTONIC.DST/00067251/0000/00067251_00001039_1.Semileptonic.dst /lhcb/LHCb/Collision12/SEMILEPTONIC.DST/00067251/0000/00067251_00000344_1.Semileptonic.dst /lhcb/LHCb/Collision12/SEMILEPTONIC.DST/00067251/0000/00067251_00000301_1.Semileptonic.dst /lhcb/LHCb/Collision12/SEMILEPTONIC.DST/00067251/0000/00067251_00000850_1.Semileptonic.dst /lhcb/LHCb/Collision12/SEMILEPTONIC.DST/00067251/0000/00067251_00000988_1.Semileptonic.dst /lhcb/LHCb/Collision12/SEMILEPTONIC.DST/00067251/0000/00067251_00001423_1.Semileptonic.dst /lhcb/LHCb/Collision12/SEMILEPTONIC.DST/00067251/0000/00067251_00000841_1.Semileptonic.dst ... /lhcb/LHCb/Collision12/SEMILEPTONIC.DST/00067251/0000/00067251_00001096_1.Semileptonic.dst It is impractical to download every single one of them, as we don't have enough storage space in lxplus , even with EOS . To split, we use split , a linux tool that should have been installed by default: split --lines=50 <filename.txt> In this case, the <filename.txt> will be sliced for every 50 lines, and the output filenames will be x?? .","title":"Split book-keeping files"},{"location":"data/data_management/#download-data-files-with-lxplus","text":"To download all dst files listed in a bookkeeping file: lhcb-proxy-init lb-run LHCbDIRAC dirac-dms-get-file -D <target_dir> --File <file_with_list_of_lfns> If you know a LFN , instead of a file that contains a list of LFN s, you can: lb-run LHCbDIRAC dirac-dms-get-file -D <target_dir> -l <lfn>","title":"Download data files with lxplus"},{"location":"data/data_sources/","text":"Run 1 data stripping line (in note) stripping line (updated) sample DIRAC path Strippingb2D0MuXB2DMuForTaoMuLine Strippingb2D0MuXB2DMuNuForTauMuLine /LHCb/Collision12/Beam4000GeV-VeloClosed-MagDown/Real Data/Reco14/Stripping21/90000000/SEMILEPTONIC.DST Note We have to use Stripping21 instead of Stripping20 as mentioned in the notes, because the latter one is no longer fully exist. Also, Stripping21 contains 2012 data, and Stripping21r1 contains 2011 data. Run 1 Monte-Carlo Tip In DIRAC , make sure to switch from Simulation Condition to Event type . Then the event will be available at MC/2012/<event_type_uid> . With D^{**} D^{**} in intermediate product 11873030 : B^0 \\rightarrow D^{**} \\tau \\nu \\rightarrow D^0 B^0 \\rightarrow D^{**} \\tau \\nu \\rightarrow D^0 11873010 : B^0 \\rightarrow D^{**} \\mu \\nu \\rightarrow D^0 B^0 \\rightarrow D^{**} \\mu \\nu \\rightarrow D^0 13873000 : B_s \\rightarrow D^{**} \\mu \\nu \\rightarrow D^0 B_s \\rightarrow D^{**} \\mu \\nu \\rightarrow D^0 12873010 : B^+ \\rightarrow D^{**} \\mu \\nu \\rightarrow D^0 B^+ \\rightarrow D^{**} \\mu \\nu \\rightarrow D^0 With D^{*} D^{*} in intermediate product 11574010 : B^0 \\rightarrow D^* \\tau \\nu B^0 \\rightarrow D^* \\tau \\nu 11574020 : B^0 \\rightarrow D^* \\mu \\nu B^0 \\rightarrow D^* \\mu \\nu 12573020 : B^+ \\rightarrow D^{*0} \\tau \\nu B^+ \\rightarrow D^{*0} \\tau \\nu 12573030 : B^+ \\rightarrow D^{*0} \\mu \\nu B^+ \\rightarrow D^{*0} \\mu \\nu With D^0 D^0 in intermediate product 12573000 : B^+ \\rightarrow D^0 \\tau \\nu B^+ \\rightarrow D^0 \\tau \\nu 12573010 : B^+ \\rightarrow D^0 \\mu \\nu B^+ \\rightarrow D^0 \\mu \\nu 11873000 : B^0 \\rightarrow D^0 DX \\rightarrow \\mu X B^0 \\rightarrow D^0 DX \\rightarrow \\mu X 12873000 : B^+ \\rightarrow D^0 DX \\rightarrow \\mu X B^+ \\rightarrow D^0 DX \\rightarrow \\mu X 11873020 : B^0 \\rightarrow D^0 D_s X \\rightarrow \\tau \\nu B^0 \\rightarrow D^0 D_s X \\rightarrow \\tau \\nu 12873020 : B^+ \\rightarrow D^0 D_s X \\rightarrow \\tau \\nu B^+ \\rightarrow D^0 D_s X \\rightarrow \\tau \\nu Cocktail sample for cut-flow study 11874091 : B_d \\rightarrow D^0 X \\mu \\nu B_d \\rightarrow D^0 X \\mu \\nu , D^0 = cocktail D^0 = cocktail . Run 2 data stripping line sample DIRAC path Strippingb2D0MuXB2DMuForTaoMuLine /LHCb/Collision16/Beam6500GeV-VeloClosed-MagDown/Real Data/Reco16/Stripping28r1/90000000/SEMILEPTONIC.DST Warning The run 2 stripping line name is different from that of run 1! The run 2 stripping line omits Nu . Run 2 Monte-Carlo Cocktail sample for cut-flow study 11874091 : B_d \\rightarrow D^0 X \\mu \\nu B_d \\rightarrow D^0 X \\mu \\nu , D^0 = cocktail D^0 = cocktail .","title":"Data sources"},{"location":"data/data_sources/#run-1-data","text":"stripping line (in note) stripping line (updated) sample DIRAC path Strippingb2D0MuXB2DMuForTaoMuLine Strippingb2D0MuXB2DMuNuForTauMuLine /LHCb/Collision12/Beam4000GeV-VeloClosed-MagDown/Real Data/Reco14/Stripping21/90000000/SEMILEPTONIC.DST Note We have to use Stripping21 instead of Stripping20 as mentioned in the notes, because the latter one is no longer fully exist. Also, Stripping21 contains 2012 data, and Stripping21r1 contains 2011 data.","title":"Run 1 data"},{"location":"data/data_sources/#run-1-monte-carlo","text":"Tip In DIRAC , make sure to switch from Simulation Condition to Event type . Then the event will be available at MC/2012/<event_type_uid> .","title":"Run 1 Monte-Carlo"},{"location":"data/data_sources/#with-dd-in-intermediate-product","text":"11873030 : B^0 \\rightarrow D^{**} \\tau \\nu \\rightarrow D^0 B^0 \\rightarrow D^{**} \\tau \\nu \\rightarrow D^0 11873010 : B^0 \\rightarrow D^{**} \\mu \\nu \\rightarrow D^0 B^0 \\rightarrow D^{**} \\mu \\nu \\rightarrow D^0 13873000 : B_s \\rightarrow D^{**} \\mu \\nu \\rightarrow D^0 B_s \\rightarrow D^{**} \\mu \\nu \\rightarrow D^0 12873010 : B^+ \\rightarrow D^{**} \\mu \\nu \\rightarrow D^0 B^+ \\rightarrow D^{**} \\mu \\nu \\rightarrow D^0","title":"With D^{**}D^{**} in intermediate product"},{"location":"data/data_sources/#with-dd-in-intermediate-product_1","text":"11574010 : B^0 \\rightarrow D^* \\tau \\nu B^0 \\rightarrow D^* \\tau \\nu 11574020 : B^0 \\rightarrow D^* \\mu \\nu B^0 \\rightarrow D^* \\mu \\nu 12573020 : B^+ \\rightarrow D^{*0} \\tau \\nu B^+ \\rightarrow D^{*0} \\tau \\nu 12573030 : B^+ \\rightarrow D^{*0} \\mu \\nu B^+ \\rightarrow D^{*0} \\mu \\nu","title":"With D^{*}D^{*} in intermediate product"},{"location":"data/data_sources/#with-d0d0-in-intermediate-product","text":"12573000 : B^+ \\rightarrow D^0 \\tau \\nu B^+ \\rightarrow D^0 \\tau \\nu 12573010 : B^+ \\rightarrow D^0 \\mu \\nu B^+ \\rightarrow D^0 \\mu \\nu 11873000 : B^0 \\rightarrow D^0 DX \\rightarrow \\mu X B^0 \\rightarrow D^0 DX \\rightarrow \\mu X 12873000 : B^+ \\rightarrow D^0 DX \\rightarrow \\mu X B^+ \\rightarrow D^0 DX \\rightarrow \\mu X 11873020 : B^0 \\rightarrow D^0 D_s X \\rightarrow \\tau \\nu B^0 \\rightarrow D^0 D_s X \\rightarrow \\tau \\nu 12873020 : B^+ \\rightarrow D^0 D_s X \\rightarrow \\tau \\nu B^+ \\rightarrow D^0 D_s X \\rightarrow \\tau \\nu","title":"With D^0D^0 in intermediate product"},{"location":"data/data_sources/#cocktail-sample-for-cut-flow-study","text":"11874091 : B_d \\rightarrow D^0 X \\mu \\nu B_d \\rightarrow D^0 X \\mu \\nu , D^0 = cocktail D^0 = cocktail .","title":"Cocktail sample for cut-flow study"},{"location":"data/data_sources/#run-2-data","text":"stripping line sample DIRAC path Strippingb2D0MuXB2DMuForTaoMuLine /LHCb/Collision16/Beam6500GeV-VeloClosed-MagDown/Real Data/Reco16/Stripping28r1/90000000/SEMILEPTONIC.DST Warning The run 2 stripping line name is different from that of run 1! The run 2 stripping line omits Nu .","title":"Run 2 data"},{"location":"data/data_sources/#run-2-monte-carlo","text":"","title":"Run 2 Monte-Carlo"},{"location":"data/data_sources/#cocktail-sample-for-cut-flow-study_1","text":"11874091 : B_d \\rightarrow D^0 X \\mu \\nu B_d \\rightarrow D^0 X \\mu \\nu , D^0 = cocktail D^0 = cocktail .","title":"Cocktail sample for cut-flow study"},{"location":"data/comparison_run1_Dst/comparison/","text":"In general, we find the unique events 1 in both ntuples, then see if they occur in both ntuples, and find their: absolute difference normalized difference, with one of them used as normalization Unless specified, all ntuples are located in run1-b2D0MuXB2DMuNuForTauMuLine/samples . Comparison between data The files being compared are, located in run1-b2D0MuXB2DMuNuForTauMuLine/ntuples/run1-Dst : BCands_Dst-phoebe-data-2012-mag_down.root BCands_Dst-yipeng-data-2012-mag_down.root Note Phoebe used this DaVinci script to generate her ntuple, with DaVinci v36r1p2 . We used our script 2 , and DaVinci v42r8p1 . D0_P difference [MeV] difference (normalized) Dst_2010_minus_P difference [MeV] difference (normalized) Kplus_P difference [MeV] difference (normalized) Kplus_PX difference [MeV] difference (normalized) Kplus_PY difference [MeV] difference (normalized) Kplus_PZ difference [MeV] difference (normalized) muplus_P difference [MeV] difference (normalized) muplus_PX difference [MeV] difference (normalized) muplus_PY difference [MeV] difference (normalized) muplus_PZ difference [MeV] difference (normalized) Y_ISOLATION_BDT difference (DL) difference (normalized) Y_ISOLATION_BDT2 difference (DL) difference (normalized) Y_ISOLATION_BDT3 difference (DL) difference (normalized) Y_ENDVERTEX_X difference [mm] difference (normalized) distributions [mm] Y_ENDVERTEX_Y difference [mm] difference (normalized) distributions [mm] Y_ENDVERTEX_Z difference [mm] difference (normalized) distributions [mm] Y_OWNPV_X difference [mm] difference (normalized) distributions [mm] Y_OWNPV_Y difference [mm] difference (normalized) distributions [mm] Y_OWNPV_Z difference [mm] difference (normalized) distributions [mm] Comparison between DaVinci v36r1p2 and v42r8p1 Files used: BCands_Dst-phoebe-data-dv36-subset.root BCands_Dst-yipeng-data-dv42-subset.root D0_P difference [MeV] difference (normalized) Dst_2010_minus_P difference [MeV] difference (normalized) Kplus_P difference [MeV] difference (normalized) Kplus_PX difference [MeV] difference (normalized) Kplus_PY difference [MeV] difference (normalized) Kplus_PZ difference [MeV] difference (normalized) muplus_P difference [MeV] difference (normalized) muplus_PX difference [MeV] difference (normalized) muplus_PY difference [MeV] difference (normalized) muplus_PZ difference [MeV] difference (normalized) Y_ISOLATION_BDT difference (DL) difference (normalized) Y_ISOLATION_BDT2 difference (DL) difference (normalized) Y_ISOLATION_BDT3 difference (DL) difference (normalized) Y_ISOLATION_Type v36r1p2 v42r8p1 Y_ISOLATION_Type2 v36r1p2 v42r8p1 Y_ISOLATION_Type3 v36r1p2 v42r8p1 Y_ISOLATION_Type4 v36r1p2 v42r8p1 Comparison between DaVinci v36r1p2 and v42r8p1 , without VELO pions Files used: BCands_Dst-phoebe-data-dv36-subset-no_velo_pions.root BCands_Dst-yipeng-data-dv42-subset-no_velo_pions.root Y_ISOLATION_BDT difference (DL) difference (normalized) Y_ISOLATION_BDT2 difference (DL) difference (normalized) Y_ISOLATION_BDT3 difference (DL) difference (normalized) Y_ISOLATION_Type Raw v36r1p2 v42r8p1 Matched diff Note These are the difference in track type for momentum-matched tracks in events matched by the event and run numbers. The momentum matching is performed for each track i = 1,2,3 i = 1,2,3 in release r= v36 , v42 by finding a track in the opposite release for any index 1 1 , 2 2 , or 3 3 whose difference in every 4-momentum component is smaller than 10 eV. The version should be interpreted in this way: v36r1p2 means v42 track type is used as a reference, and the difference is calculated with: TrackType_{v42} - TrackType_{v36} TrackType_{v42} - TrackType_{v36} . v36r1p2 v42r8p1 Y_ISOLATION_Type2 Raw v36r1p2 v42r8p1 Matched diff v36r1p2 v42r8p1 Y_ISOLATION_Type3 Raw v36r1p2 v42r8p1 Matched diff v36r1p2 v42r8p1 Y_ISOLATION_Type4 v36r1p2 v42r8p1 ISOLATION_TRACK1 Note ISOLATION_TRACK{1,2,3} represent the best 3 tracks selected by the BDT. A value of 1 1 represents ISOLATION_TRACK1 . 2 2 and 3 3 are interpreted in the same way. A value of 0 0 indicates no match at all. A value of -2 -2 indicates no actual track exists, and is only assigned when the BDT score is -2 -2 . The version should be interpreted in this way: v36r1p2 means matching a v36 track with all 3 v42 tracks with the same UID. The v42 tracks act as references. Also, for track i i , if the match is 100%, then all datapoints should be at i i . v36r1p2 v42r8p1 ISOLATION_TRACK2 v36r1p2 v42r8p1 ISOLATION_TRACK3 v36r1p2 v42r8p1 Comparison between DaVinci v36r1p2 and v42r8p1 , without refitting Files used: BCands_Dst-phoebe-data-2012-mag_down-dv36-subset-no_refit.root BCands_Dst-yipeng-data-2012-mag_down-dv42-subset-no_refit.root D0_P difference [MeV] difference (normalized) Dst_2010_minus_P difference [MeV] difference (normalized) Kplus_P difference [MeV] difference (normalized) Kplus_PX difference [MeV] difference (normalized) Kplus_PY difference [MeV] difference (normalized) Kplus_PZ difference [MeV] difference (normalized) muplus_P difference [MeV] difference (normalized) muplus_PX difference [MeV] difference (normalized) muplus_PY difference [MeV] difference (normalized) muplus_PZ difference [MeV] difference (normalized) Y_ISOLATION_BDT difference (DL) difference (normalized) Y_ISOLATION_BDT2 difference (DL) difference (normalized) Y_ISOLATION_BDT3 difference (DL) difference (normalized) Y_ISOLATION_Type Raw v36r1p2 v42r8p1 Matched diff v36r1p2 v42r8p1 Y_ISOLATION_Type2 Raw v36r1p2 v42r8p1 Matched diff v36r1p2 v42r8p1 Y_ISOLATION_Type3 Raw v36r1p2 v42r8p1 Matched diff v36r1p2 v42r8p1 Y_ISOLATION_Type4 v36r1p2 v42r8p1 ISOLATION_TRACK1 v36r1p2 v42r8p1 ISOLATION_TRACK2 v36r1p2 v42r8p1 ISOLATION_TRACK3 v36r1p2 v42r8p1 TRACK_TYPE1_CHI2 v36r1p2 v42r8p1 TRACK_TYPE3_CHI2 v36r1p2 v42r8p1 TRACK_TYPE4_CHI2 v36r1p2 v42r8p1 Track type difference vs. BDT score difference v36r1p2 v42r8p1 Comparison between DaVinci v36r1p2 and v45r3 , without refitting Files used: BCands_Dst-phoebe-data-2012-mag_down-dv36-subset-no_refit.root BCands_Dst-yipeng-data-2012-mag_down-dv45-subset-no_refit.root D0_P difference [MeV] difference (normalized) Dst_2010_minus_P difference [MeV] difference (normalized) Kplus_P difference [MeV] difference (normalized) Kplus_PX difference [MeV] difference (normalized) Kplus_PY difference [MeV] difference (normalized) Kplus_PZ difference [MeV] difference (normalized) muplus_P difference [MeV] difference (normalized) muplus_PX difference [MeV] difference (normalized) muplus_PY difference [MeV] difference (normalized) muplus_PZ difference [MeV] difference (normalized) Y_ISOLATION_BDT difference (DL) difference (normalized) Y_ISOLATION_BDT2 difference (DL) difference (normalized) Y_ISOLATION_BDT3 difference (DL) difference (normalized) Y_ISOLATION_Type Raw v36r1p2 v45r3 Matched diff v36r1p2 v45r3 Y_ISOLATION_Type2 Raw v36r1p2 v45r3 Matched diff v36r1p2 v45r3 Y_ISOLATION_Type3 Raw v36r1p2 v45r3 Matched diff v36r1p2 v45r3 Y_ISOLATION_Type4 v36r1p2 v45r3 ISOLATION_TRACK1 v36r1p2 v45r3 ISOLATION_TRACK2 v36r1p2 v45r3 ISOLATION_TRACK3 v36r1p2 v45r3 TRACK_TYPE1_CHI2 v36r1p2 v45r3 TRACK_TYPE3_CHI2 v36r1p2 v45r3 TRACK_TYPE4_CHI2 v36r1p2 v45r3 Track type difference vs. BDT score difference v36r1p2 v45r3 Comparison between DaVinci v42r8p1 and v45r3 , without refitting Files used: BCands_Dst-phoebe-data-2012-mag_down-dv42-subset-no_refit.root BCands_Dst-yipeng-data-2012-mag_down-dv45-subset-no_refit.root D0_P difference [MeV] difference (normalized) Dst_2010_minus_P difference [MeV] difference (normalized) Kplus_P difference [MeV] difference (normalized) Kplus_PX difference [MeV] difference (normalized) Kplus_PY difference [MeV] difference (normalized) Kplus_PZ difference [MeV] difference (normalized) muplus_P difference [MeV] difference (normalized) muplus_PX difference [MeV] difference (normalized) muplus_PY difference [MeV] difference (normalized) muplus_PZ difference [MeV] difference (normalized) Y_ISOLATION_BDT difference (DL) difference (normalized) Y_ISOLATION_BDT2 difference (DL) difference (normalized) Y_ISOLATION_BDT3 difference (DL) difference (normalized) Y_ISOLATION_Type Raw v42r8p1 v45r3 Matched diff v42r8p1 v45r3 Y_ISOLATION_Type2 Raw v42r8p1 v45r3 Matched diff v42r8p1 v45r3 Y_ISOLATION_Type3 Raw v42r8p1 v45r3 Matched diff v42r8p1 v45r3 Y_ISOLATION_Type4 v42r8p1 v45r3 ISOLATION_TRACK1 v42r8p1 v45r3 ISOLATION_TRACK2 v42r8p1 v45r3 ISOLATION_TRACK3 v42r8p1 v45r3 TRACK_TYPE1_CHI2 v42r8p1 v45r3 TRACK_TYPE3_CHI2 v42r8p1 v45r3 TRACK_TYPE4_CHI2 v42r8p1 v45r3 Track type difference vs. BDT score difference v42r8p1 v45r3 Comparison between DaVinci v36r1p2 and v42r8p1 , without refitting or momentum rescaling Files used: BCands_Dst-phoebe-data-2012-mag_down-dv36-subset-no_refit-no_rescale.root BCands_Dst-yipeng-data-2012-mag_down-dv42-subset-no_refit-no_rescale.root D0_P difference [MeV] difference (normalized) Dst_2010_minus_P difference [MeV] difference (normalized) Y_ISOLATION_Type Raw v36r1p2 v42r8p1 Matched diff v36r1p2 v42r8p1 Y_ISOLATION_Type2 Raw v36r1p2 v42r8p1 Matched diff v36r1p2 v42r8p1 Y_ISOLATION_Type3 Raw v36r1p2 v42r8p1 Matched diff v36r1p2 v42r8p1 Y_ISOLATION_Type4 v36r1p2 v42r8p1 ISOLATION_TRACK1 v36r1p2 v42r8p1 ISOLATION_TRACK2 v36r1p2 v42r8p1 ISOLATION_TRACK3 v36r1p2 v42r8p1 TRACK_TYPE1_CHI2 v36r1p2 v42r8p1 TRACK_TYPE3_CHI2 v36r1p2 v42r8p1 TRACK_TYPE4_CHI2 v36r1p2 v42r8p1 Track type difference vs. BDT score difference v36r1p2 v42r8p1 Comparison between MC (Pythia 6) Files used, located in run1-b2D0MuXB2DMuNuForTauMuLine/ntuples/mc : BCands-phoebe-mc-mag_down-py6-Bd2DstTauNu.root BCands-yipeng-mc-mag_down-py6-sim08a-Bd2DstTauNu.root D0_P difference [MeV] difference (normalized) Kplus_P difference [MeV] difference (normalized) Y_ISOLATION_BDT difference [MeV] difference (normalized) Y_ISOLATION_BDT2 difference [MeV] difference (normalized) Y_ISOLATION_BDT3 difference [MeV] difference (normalized) Typically by the combination of runNumber and eventNumber . \u21a9 Based on Phoebe's original script. \u21a9","title":"Run 1 `R(D^{\\star})`"},{"location":"data/comparison_run1_Dst/comparison/#comparison-between-data","text":"The files being compared are, located in run1-b2D0MuXB2DMuNuForTauMuLine/ntuples/run1-Dst : BCands_Dst-phoebe-data-2012-mag_down.root BCands_Dst-yipeng-data-2012-mag_down.root Note Phoebe used this DaVinci script to generate her ntuple, with DaVinci v36r1p2 . We used our script 2 , and DaVinci v42r8p1 .","title":"Comparison between data"},{"location":"data/comparison_run1_Dst/comparison/#d0_p","text":"difference [MeV] difference (normalized)","title":"D0_P"},{"location":"data/comparison_run1_Dst/comparison/#dst_2010_minus_p","text":"difference [MeV] difference (normalized)","title":"Dst_2010_minus_P"},{"location":"data/comparison_run1_Dst/comparison/#kplus_p","text":"difference [MeV] difference (normalized)","title":"Kplus_P"},{"location":"data/comparison_run1_Dst/comparison/#kplus_px","text":"difference [MeV] difference (normalized)","title":"Kplus_PX"},{"location":"data/comparison_run1_Dst/comparison/#kplus_py","text":"difference [MeV] difference (normalized)","title":"Kplus_PY"},{"location":"data/comparison_run1_Dst/comparison/#kplus_pz","text":"difference [MeV] difference (normalized)","title":"Kplus_PZ"},{"location":"data/comparison_run1_Dst/comparison/#muplus_p","text":"difference [MeV] difference (normalized)","title":"muplus_P"},{"location":"data/comparison_run1_Dst/comparison/#muplus_px","text":"difference [MeV] difference (normalized)","title":"muplus_PX"},{"location":"data/comparison_run1_Dst/comparison/#muplus_py","text":"difference [MeV] difference (normalized)","title":"muplus_PY"},{"location":"data/comparison_run1_Dst/comparison/#muplus_pz","text":"difference [MeV] difference (normalized)","title":"muplus_PZ"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_bdt","text":"difference (DL) difference (normalized)","title":"Y_ISOLATION_BDT"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_bdt2","text":"difference (DL) difference (normalized)","title":"Y_ISOLATION_BDT2"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_bdt3","text":"difference (DL) difference (normalized)","title":"Y_ISOLATION_BDT3"},{"location":"data/comparison_run1_Dst/comparison/#y_endvertex_x","text":"difference [mm] difference (normalized) distributions [mm]","title":"Y_ENDVERTEX_X"},{"location":"data/comparison_run1_Dst/comparison/#y_endvertex_y","text":"difference [mm] difference (normalized) distributions [mm]","title":"Y_ENDVERTEX_Y"},{"location":"data/comparison_run1_Dst/comparison/#y_endvertex_z","text":"difference [mm] difference (normalized) distributions [mm]","title":"Y_ENDVERTEX_Z"},{"location":"data/comparison_run1_Dst/comparison/#y_ownpv_x","text":"difference [mm] difference (normalized) distributions [mm]","title":"Y_OWNPV_X"},{"location":"data/comparison_run1_Dst/comparison/#y_ownpv_y","text":"difference [mm] difference (normalized) distributions [mm]","title":"Y_OWNPV_Y"},{"location":"data/comparison_run1_Dst/comparison/#y_ownpv_z","text":"difference [mm] difference (normalized) distributions [mm]","title":"Y_OWNPV_Z"},{"location":"data/comparison_run1_Dst/comparison/#comparison-between-davinci-v36r1p2-and-v42r8p1","text":"Files used: BCands_Dst-phoebe-data-dv36-subset.root BCands_Dst-yipeng-data-dv42-subset.root","title":"Comparison between DaVinci v36r1p2 and v42r8p1"},{"location":"data/comparison_run1_Dst/comparison/#d0_p_1","text":"difference [MeV] difference (normalized)","title":"D0_P"},{"location":"data/comparison_run1_Dst/comparison/#dst_2010_minus_p_1","text":"difference [MeV] difference (normalized)","title":"Dst_2010_minus_P"},{"location":"data/comparison_run1_Dst/comparison/#kplus_p_1","text":"difference [MeV] difference (normalized)","title":"Kplus_P"},{"location":"data/comparison_run1_Dst/comparison/#kplus_px_1","text":"difference [MeV] difference (normalized)","title":"Kplus_PX"},{"location":"data/comparison_run1_Dst/comparison/#kplus_py_1","text":"difference [MeV] difference (normalized)","title":"Kplus_PY"},{"location":"data/comparison_run1_Dst/comparison/#kplus_pz_1","text":"difference [MeV] difference (normalized)","title":"Kplus_PZ"},{"location":"data/comparison_run1_Dst/comparison/#muplus_p_1","text":"difference [MeV] difference (normalized)","title":"muplus_P"},{"location":"data/comparison_run1_Dst/comparison/#muplus_px_1","text":"difference [MeV] difference (normalized)","title":"muplus_PX"},{"location":"data/comparison_run1_Dst/comparison/#muplus_py_1","text":"difference [MeV] difference (normalized)","title":"muplus_PY"},{"location":"data/comparison_run1_Dst/comparison/#muplus_pz_1","text":"difference [MeV] difference (normalized)","title":"muplus_PZ"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_bdt_1","text":"difference (DL) difference (normalized)","title":"Y_ISOLATION_BDT"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_bdt2_1","text":"difference (DL) difference (normalized)","title":"Y_ISOLATION_BDT2"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_bdt3_1","text":"difference (DL) difference (normalized)","title":"Y_ISOLATION_BDT3"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type","text":"v36r1p2 v42r8p1","title":"Y_ISOLATION_Type"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type2","text":"v36r1p2 v42r8p1","title":"Y_ISOLATION_Type2"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type3","text":"v36r1p2 v42r8p1","title":"Y_ISOLATION_Type3"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type4","text":"v36r1p2 v42r8p1","title":"Y_ISOLATION_Type4"},{"location":"data/comparison_run1_Dst/comparison/#comparison-between-davinci-v36r1p2-and-v42r8p1-without-velo-pions","text":"Files used: BCands_Dst-phoebe-data-dv36-subset-no_velo_pions.root BCands_Dst-yipeng-data-dv42-subset-no_velo_pions.root","title":"Comparison between DaVinci v36r1p2 and v42r8p1, without VELO pions"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_bdt_2","text":"difference (DL) difference (normalized)","title":"Y_ISOLATION_BDT"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_bdt2_2","text":"difference (DL) difference (normalized)","title":"Y_ISOLATION_BDT2"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_bdt3_2","text":"difference (DL) difference (normalized)","title":"Y_ISOLATION_BDT3"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type_1","text":"","title":"Y_ISOLATION_Type"},{"location":"data/comparison_run1_Dst/comparison/#raw","text":"v36r1p2 v42r8p1","title":"Raw"},{"location":"data/comparison_run1_Dst/comparison/#matched-diff","text":"Note These are the difference in track type for momentum-matched tracks in events matched by the event and run numbers. The momentum matching is performed for each track i = 1,2,3 i = 1,2,3 in release r= v36 , v42 by finding a track in the opposite release for any index 1 1 , 2 2 , or 3 3 whose difference in every 4-momentum component is smaller than 10 eV. The version should be interpreted in this way: v36r1p2 means v42 track type is used as a reference, and the difference is calculated with: TrackType_{v42} - TrackType_{v36} TrackType_{v42} - TrackType_{v36} . v36r1p2 v42r8p1","title":"Matched diff"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type2_1","text":"","title":"Y_ISOLATION_Type2"},{"location":"data/comparison_run1_Dst/comparison/#raw_1","text":"v36r1p2 v42r8p1","title":"Raw"},{"location":"data/comparison_run1_Dst/comparison/#matched-diff_1","text":"v36r1p2 v42r8p1","title":"Matched diff"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type3_1","text":"","title":"Y_ISOLATION_Type3"},{"location":"data/comparison_run1_Dst/comparison/#raw_2","text":"v36r1p2 v42r8p1","title":"Raw"},{"location":"data/comparison_run1_Dst/comparison/#matched-diff_2","text":"v36r1p2 v42r8p1","title":"Matched diff"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type4_1","text":"v36r1p2 v42r8p1","title":"Y_ISOLATION_Type4"},{"location":"data/comparison_run1_Dst/comparison/#isolation_track1","text":"Note ISOLATION_TRACK{1,2,3} represent the best 3 tracks selected by the BDT. A value of 1 1 represents ISOLATION_TRACK1 . 2 2 and 3 3 are interpreted in the same way. A value of 0 0 indicates no match at all. A value of -2 -2 indicates no actual track exists, and is only assigned when the BDT score is -2 -2 . The version should be interpreted in this way: v36r1p2 means matching a v36 track with all 3 v42 tracks with the same UID. The v42 tracks act as references. Also, for track i i , if the match is 100%, then all datapoints should be at i i . v36r1p2 v42r8p1","title":"ISOLATION_TRACK1"},{"location":"data/comparison_run1_Dst/comparison/#isolation_track2","text":"v36r1p2 v42r8p1","title":"ISOLATION_TRACK2"},{"location":"data/comparison_run1_Dst/comparison/#isolation_track3","text":"v36r1p2 v42r8p1","title":"ISOLATION_TRACK3"},{"location":"data/comparison_run1_Dst/comparison/#comparison-between-davinci-v36r1p2-and-v42r8p1-without-refitting","text":"Files used: BCands_Dst-phoebe-data-2012-mag_down-dv36-subset-no_refit.root BCands_Dst-yipeng-data-2012-mag_down-dv42-subset-no_refit.root","title":"Comparison between DaVinci v36r1p2 and v42r8p1, without refitting"},{"location":"data/comparison_run1_Dst/comparison/#d0_p_2","text":"difference [MeV] difference (normalized)","title":"D0_P"},{"location":"data/comparison_run1_Dst/comparison/#dst_2010_minus_p_2","text":"difference [MeV] difference (normalized)","title":"Dst_2010_minus_P"},{"location":"data/comparison_run1_Dst/comparison/#kplus_p_2","text":"difference [MeV] difference (normalized)","title":"Kplus_P"},{"location":"data/comparison_run1_Dst/comparison/#kplus_px_2","text":"difference [MeV] difference (normalized)","title":"Kplus_PX"},{"location":"data/comparison_run1_Dst/comparison/#kplus_py_2","text":"difference [MeV] difference (normalized)","title":"Kplus_PY"},{"location":"data/comparison_run1_Dst/comparison/#kplus_pz_2","text":"difference [MeV] difference (normalized)","title":"Kplus_PZ"},{"location":"data/comparison_run1_Dst/comparison/#muplus_p_2","text":"difference [MeV] difference (normalized)","title":"muplus_P"},{"location":"data/comparison_run1_Dst/comparison/#muplus_px_2","text":"difference [MeV] difference (normalized)","title":"muplus_PX"},{"location":"data/comparison_run1_Dst/comparison/#muplus_py_2","text":"difference [MeV] difference (normalized)","title":"muplus_PY"},{"location":"data/comparison_run1_Dst/comparison/#muplus_pz_2","text":"difference [MeV] difference (normalized)","title":"muplus_PZ"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_bdt_3","text":"difference (DL) difference (normalized)","title":"Y_ISOLATION_BDT"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_bdt2_3","text":"difference (DL) difference (normalized)","title":"Y_ISOLATION_BDT2"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_bdt3_3","text":"difference (DL) difference (normalized)","title":"Y_ISOLATION_BDT3"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type_2","text":"","title":"Y_ISOLATION_Type"},{"location":"data/comparison_run1_Dst/comparison/#raw_3","text":"v36r1p2 v42r8p1","title":"Raw"},{"location":"data/comparison_run1_Dst/comparison/#matched-diff_3","text":"v36r1p2 v42r8p1","title":"Matched diff"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type2_2","text":"","title":"Y_ISOLATION_Type2"},{"location":"data/comparison_run1_Dst/comparison/#raw_4","text":"v36r1p2 v42r8p1","title":"Raw"},{"location":"data/comparison_run1_Dst/comparison/#matched-diff_4","text":"v36r1p2 v42r8p1","title":"Matched diff"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type3_2","text":"","title":"Y_ISOLATION_Type3"},{"location":"data/comparison_run1_Dst/comparison/#raw_5","text":"v36r1p2 v42r8p1","title":"Raw"},{"location":"data/comparison_run1_Dst/comparison/#matched-diff_5","text":"v36r1p2 v42r8p1","title":"Matched diff"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type4_2","text":"v36r1p2 v42r8p1","title":"Y_ISOLATION_Type4"},{"location":"data/comparison_run1_Dst/comparison/#isolation_track1_1","text":"v36r1p2 v42r8p1","title":"ISOLATION_TRACK1"},{"location":"data/comparison_run1_Dst/comparison/#isolation_track2_1","text":"v36r1p2 v42r8p1","title":"ISOLATION_TRACK2"},{"location":"data/comparison_run1_Dst/comparison/#isolation_track3_1","text":"v36r1p2 v42r8p1","title":"ISOLATION_TRACK3"},{"location":"data/comparison_run1_Dst/comparison/#track_type1_chi2","text":"v36r1p2 v42r8p1","title":"TRACK_TYPE1_CHI2"},{"location":"data/comparison_run1_Dst/comparison/#track_type3_chi2","text":"v36r1p2 v42r8p1","title":"TRACK_TYPE3_CHI2"},{"location":"data/comparison_run1_Dst/comparison/#track_type4_chi2","text":"v36r1p2 v42r8p1","title":"TRACK_TYPE4_CHI2"},{"location":"data/comparison_run1_Dst/comparison/#track-type-difference-vs-bdt-score-difference","text":"v36r1p2 v42r8p1","title":"Track type difference vs. BDT score difference"},{"location":"data/comparison_run1_Dst/comparison/#comparison-between-davinci-v36r1p2-and-v45r3-without-refitting","text":"Files used: BCands_Dst-phoebe-data-2012-mag_down-dv36-subset-no_refit.root BCands_Dst-yipeng-data-2012-mag_down-dv45-subset-no_refit.root","title":"Comparison between DaVinci v36r1p2 and v45r3, without refitting"},{"location":"data/comparison_run1_Dst/comparison/#d0_p_3","text":"difference [MeV] difference (normalized)","title":"D0_P"},{"location":"data/comparison_run1_Dst/comparison/#dst_2010_minus_p_3","text":"difference [MeV] difference (normalized)","title":"Dst_2010_minus_P"},{"location":"data/comparison_run1_Dst/comparison/#kplus_p_3","text":"difference [MeV] difference (normalized)","title":"Kplus_P"},{"location":"data/comparison_run1_Dst/comparison/#kplus_px_3","text":"difference [MeV] difference (normalized)","title":"Kplus_PX"},{"location":"data/comparison_run1_Dst/comparison/#kplus_py_3","text":"difference [MeV] difference (normalized)","title":"Kplus_PY"},{"location":"data/comparison_run1_Dst/comparison/#kplus_pz_3","text":"difference [MeV] difference (normalized)","title":"Kplus_PZ"},{"location":"data/comparison_run1_Dst/comparison/#muplus_p_3","text":"difference [MeV] difference (normalized)","title":"muplus_P"},{"location":"data/comparison_run1_Dst/comparison/#muplus_px_3","text":"difference [MeV] difference (normalized)","title":"muplus_PX"},{"location":"data/comparison_run1_Dst/comparison/#muplus_py_3","text":"difference [MeV] difference (normalized)","title":"muplus_PY"},{"location":"data/comparison_run1_Dst/comparison/#muplus_pz_3","text":"difference [MeV] difference (normalized)","title":"muplus_PZ"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_bdt_4","text":"difference (DL) difference (normalized)","title":"Y_ISOLATION_BDT"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_bdt2_4","text":"difference (DL) difference (normalized)","title":"Y_ISOLATION_BDT2"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_bdt3_4","text":"difference (DL) difference (normalized)","title":"Y_ISOLATION_BDT3"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type_3","text":"","title":"Y_ISOLATION_Type"},{"location":"data/comparison_run1_Dst/comparison/#raw_6","text":"v36r1p2 v45r3","title":"Raw"},{"location":"data/comparison_run1_Dst/comparison/#matched-diff_6","text":"v36r1p2 v45r3","title":"Matched diff"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type2_3","text":"","title":"Y_ISOLATION_Type2"},{"location":"data/comparison_run1_Dst/comparison/#raw_7","text":"v36r1p2 v45r3","title":"Raw"},{"location":"data/comparison_run1_Dst/comparison/#matched-diff_7","text":"v36r1p2 v45r3","title":"Matched diff"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type3_3","text":"","title":"Y_ISOLATION_Type3"},{"location":"data/comparison_run1_Dst/comparison/#raw_8","text":"v36r1p2 v45r3","title":"Raw"},{"location":"data/comparison_run1_Dst/comparison/#matched-diff_8","text":"v36r1p2 v45r3","title":"Matched diff"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type4_3","text":"v36r1p2 v45r3","title":"Y_ISOLATION_Type4"},{"location":"data/comparison_run1_Dst/comparison/#isolation_track1_2","text":"v36r1p2 v45r3","title":"ISOLATION_TRACK1"},{"location":"data/comparison_run1_Dst/comparison/#isolation_track2_2","text":"v36r1p2 v45r3","title":"ISOLATION_TRACK2"},{"location":"data/comparison_run1_Dst/comparison/#isolation_track3_2","text":"v36r1p2 v45r3","title":"ISOLATION_TRACK3"},{"location":"data/comparison_run1_Dst/comparison/#track_type1_chi2_1","text":"v36r1p2 v45r3","title":"TRACK_TYPE1_CHI2"},{"location":"data/comparison_run1_Dst/comparison/#track_type3_chi2_1","text":"v36r1p2 v45r3","title":"TRACK_TYPE3_CHI2"},{"location":"data/comparison_run1_Dst/comparison/#track_type4_chi2_1","text":"v36r1p2 v45r3","title":"TRACK_TYPE4_CHI2"},{"location":"data/comparison_run1_Dst/comparison/#track-type-difference-vs-bdt-score-difference_1","text":"v36r1p2 v45r3","title":"Track type difference vs. BDT score difference"},{"location":"data/comparison_run1_Dst/comparison/#comparison-between-davinci-v42r8p1-and-v45r3-without-refitting","text":"Files used: BCands_Dst-phoebe-data-2012-mag_down-dv42-subset-no_refit.root BCands_Dst-yipeng-data-2012-mag_down-dv45-subset-no_refit.root","title":"Comparison between DaVinci v42r8p1 and v45r3, without refitting"},{"location":"data/comparison_run1_Dst/comparison/#d0_p_4","text":"difference [MeV] difference (normalized)","title":"D0_P"},{"location":"data/comparison_run1_Dst/comparison/#dst_2010_minus_p_4","text":"difference [MeV] difference (normalized)","title":"Dst_2010_minus_P"},{"location":"data/comparison_run1_Dst/comparison/#kplus_p_4","text":"difference [MeV] difference (normalized)","title":"Kplus_P"},{"location":"data/comparison_run1_Dst/comparison/#kplus_px_4","text":"difference [MeV] difference (normalized)","title":"Kplus_PX"},{"location":"data/comparison_run1_Dst/comparison/#kplus_py_4","text":"difference [MeV] difference (normalized)","title":"Kplus_PY"},{"location":"data/comparison_run1_Dst/comparison/#kplus_pz_4","text":"difference [MeV] difference (normalized)","title":"Kplus_PZ"},{"location":"data/comparison_run1_Dst/comparison/#muplus_p_4","text":"difference [MeV] difference (normalized)","title":"muplus_P"},{"location":"data/comparison_run1_Dst/comparison/#muplus_px_4","text":"difference [MeV] difference (normalized)","title":"muplus_PX"},{"location":"data/comparison_run1_Dst/comparison/#muplus_py_4","text":"difference [MeV] difference (normalized)","title":"muplus_PY"},{"location":"data/comparison_run1_Dst/comparison/#muplus_pz_4","text":"difference [MeV] difference (normalized)","title":"muplus_PZ"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_bdt_5","text":"difference (DL) difference (normalized)","title":"Y_ISOLATION_BDT"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_bdt2_5","text":"difference (DL) difference (normalized)","title":"Y_ISOLATION_BDT2"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_bdt3_5","text":"difference (DL) difference (normalized)","title":"Y_ISOLATION_BDT3"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type_4","text":"","title":"Y_ISOLATION_Type"},{"location":"data/comparison_run1_Dst/comparison/#raw_9","text":"v42r8p1 v45r3","title":"Raw"},{"location":"data/comparison_run1_Dst/comparison/#matched-diff_9","text":"v42r8p1 v45r3","title":"Matched diff"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type2_4","text":"","title":"Y_ISOLATION_Type2"},{"location":"data/comparison_run1_Dst/comparison/#raw_10","text":"v42r8p1 v45r3","title":"Raw"},{"location":"data/comparison_run1_Dst/comparison/#matched-diff_10","text":"v42r8p1 v45r3","title":"Matched diff"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type3_4","text":"","title":"Y_ISOLATION_Type3"},{"location":"data/comparison_run1_Dst/comparison/#raw_11","text":"v42r8p1 v45r3","title":"Raw"},{"location":"data/comparison_run1_Dst/comparison/#matched-diff_11","text":"v42r8p1 v45r3","title":"Matched diff"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type4_4","text":"v42r8p1 v45r3","title":"Y_ISOLATION_Type4"},{"location":"data/comparison_run1_Dst/comparison/#isolation_track1_3","text":"v42r8p1 v45r3","title":"ISOLATION_TRACK1"},{"location":"data/comparison_run1_Dst/comparison/#isolation_track2_3","text":"v42r8p1 v45r3","title":"ISOLATION_TRACK2"},{"location":"data/comparison_run1_Dst/comparison/#isolation_track3_3","text":"v42r8p1 v45r3","title":"ISOLATION_TRACK3"},{"location":"data/comparison_run1_Dst/comparison/#track_type1_chi2_2","text":"v42r8p1 v45r3","title":"TRACK_TYPE1_CHI2"},{"location":"data/comparison_run1_Dst/comparison/#track_type3_chi2_2","text":"v42r8p1 v45r3","title":"TRACK_TYPE3_CHI2"},{"location":"data/comparison_run1_Dst/comparison/#track_type4_chi2_2","text":"v42r8p1 v45r3","title":"TRACK_TYPE4_CHI2"},{"location":"data/comparison_run1_Dst/comparison/#track-type-difference-vs-bdt-score-difference_2","text":"v42r8p1 v45r3","title":"Track type difference vs. BDT score difference"},{"location":"data/comparison_run1_Dst/comparison/#comparison-between-davinci-v36r1p2-and-v42r8p1-without-refitting-or-momentum-rescaling","text":"Files used: BCands_Dst-phoebe-data-2012-mag_down-dv36-subset-no_refit-no_rescale.root BCands_Dst-yipeng-data-2012-mag_down-dv42-subset-no_refit-no_rescale.root","title":"Comparison between DaVinci v36r1p2 and v42r8p1, without refitting or momentum rescaling"},{"location":"data/comparison_run1_Dst/comparison/#d0_p_5","text":"difference [MeV] difference (normalized)","title":"D0_P"},{"location":"data/comparison_run1_Dst/comparison/#dst_2010_minus_p_5","text":"difference [MeV] difference (normalized)","title":"Dst_2010_minus_P"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type_5","text":"","title":"Y_ISOLATION_Type"},{"location":"data/comparison_run1_Dst/comparison/#raw_12","text":"v36r1p2 v42r8p1","title":"Raw"},{"location":"data/comparison_run1_Dst/comparison/#matched-diff_12","text":"v36r1p2 v42r8p1","title":"Matched diff"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type2_5","text":"","title":"Y_ISOLATION_Type2"},{"location":"data/comparison_run1_Dst/comparison/#raw_13","text":"v36r1p2 v42r8p1","title":"Raw"},{"location":"data/comparison_run1_Dst/comparison/#matched-diff_13","text":"v36r1p2 v42r8p1","title":"Matched diff"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type3_5","text":"","title":"Y_ISOLATION_Type3"},{"location":"data/comparison_run1_Dst/comparison/#raw_14","text":"v36r1p2 v42r8p1","title":"Raw"},{"location":"data/comparison_run1_Dst/comparison/#matched-diff_14","text":"v36r1p2 v42r8p1","title":"Matched diff"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_type4_5","text":"v36r1p2 v42r8p1","title":"Y_ISOLATION_Type4"},{"location":"data/comparison_run1_Dst/comparison/#isolation_track1_4","text":"v36r1p2 v42r8p1","title":"ISOLATION_TRACK1"},{"location":"data/comparison_run1_Dst/comparison/#isolation_track2_4","text":"v36r1p2 v42r8p1","title":"ISOLATION_TRACK2"},{"location":"data/comparison_run1_Dst/comparison/#isolation_track3_4","text":"v36r1p2 v42r8p1","title":"ISOLATION_TRACK3"},{"location":"data/comparison_run1_Dst/comparison/#track_type1_chi2_3","text":"v36r1p2 v42r8p1","title":"TRACK_TYPE1_CHI2"},{"location":"data/comparison_run1_Dst/comparison/#track_type3_chi2_3","text":"v36r1p2 v42r8p1","title":"TRACK_TYPE3_CHI2"},{"location":"data/comparison_run1_Dst/comparison/#track_type4_chi2_3","text":"v36r1p2 v42r8p1","title":"TRACK_TYPE4_CHI2"},{"location":"data/comparison_run1_Dst/comparison/#track-type-difference-vs-bdt-score-difference_3","text":"v36r1p2 v42r8p1","title":"Track type difference vs. BDT score difference"},{"location":"data/comparison_run1_Dst/comparison/#comparison-between-mc-pythia-6","text":"Files used, located in run1-b2D0MuXB2DMuNuForTauMuLine/ntuples/mc : BCands-phoebe-mc-mag_down-py6-Bd2DstTauNu.root BCands-yipeng-mc-mag_down-py6-sim08a-Bd2DstTauNu.root","title":"Comparison between MC (Pythia 6)"},{"location":"data/comparison_run1_Dst/comparison/#d0_p_6","text":"difference [MeV] difference (normalized)","title":"D0_P"},{"location":"data/comparison_run1_Dst/comparison/#kplus_p_5","text":"difference [MeV] difference (normalized)","title":"Kplus_P"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_bdt_6","text":"difference [MeV] difference (normalized)","title":"Y_ISOLATION_BDT"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_bdt2_6","text":"difference [MeV] difference (normalized)","title":"Y_ISOLATION_BDT2"},{"location":"data/comparison_run1_Dst/comparison/#y_isolation_bdt3_6","text":"difference [MeV] difference (normalized) Typically by the combination of runNumber and eventNumber . \u21a9 Based on Phoebe's original script. \u21a9","title":"Y_ISOLATION_BDT3"},{"location":"ntupling/installation/","text":"Install VCS ( git and git-annex ) We use git to version-control the ntupling code and the wiki, and git-annex to version-control large files, mostly the input .dst files or important .root outputs. For more details on git-annex , see this brief introduction . On Arch Linux, simply issue the following command to install both programs: sudo pacman -S git git-annex On macOS, if you have homebrew installed: brew install git git-annex Now clone the repository and set up the annex component. We have a private server, julian , that hosts git-annex files. You will need to send us a SSH key so that we can give your read/write permission to the server. git clone git@github.com:umd-lhcb/lhcb-ntuples-gen cd lhcb-ntuples-gen git remote add julian git@129.2.92.92:lhcb-ntuples-gen git annex init --version=7 git annex sync --no-pull julian git annex sync julian Note that these commands will only initialize the files controlled by git-annex (several GB in total) with symbolic links. You typically will download individual files as you need them with git annex get <path_to_file> Microsoft Windows and Ubuntu not supported, require pre-build image below Windows filesystems don't support symbolic links, which makes git-annex almost unusable. In Ubuntu there is no easy way to install an up-to-date git-annex . Please use the pre-built image listed in this section that has everything installed. Note that VirtualBox needs to be installed on Ubuntu manually first. Install docker to run DaVinci locally We use docker to run a pre-built DaVinci image locally. To install docker : On Arch Linux run the command below and follow this Arch wiki entry to finish the setup: sudo pacman -S docker On macOS, with homebrew : brew install docker Now it's time to pull (download) the pre-built DaVinci docker: docker pull umdlhcb/lhcb-stack-cc7:DaVinci-v45r3-SL Install dependencies for babymaker babymaker is part of the pyBabyMaker Python package. It requires gcc 1 , ROOT , python3 , and a couple of other Python packages 2 . Note It is strongly recommended to install clang-format 3 , so the generated C++ code looks much nicer. Install these tools with your choice of package manager. To install pyBabyMaker and other required Python packages, you can use the following command: pip3 install --user -r requirements.txt Install dependencies for plotting The comparison plots in this page require pyTuplingUtils , which is install as follows git clone git@github.com:umd-lhcb/pyTuplingUtils cd pyTuplingUtils/ python3 setup.py build python3 setup.py install Use a pre-built VirtualBox image on Windows and Ubuntu The pre-built VirtualBox image is based on Arch Linux. It contains git , git-annex ; docker ( DaVinci image not downloaded); all babymaker dependencies ( Python packages not installed); sublime text editor. To use the virtual machine image, Please follow these steps on Microsoft Windows: Download and install the latest VirtualBox from here . Download the pre-built image from here (choose the latest date, then download both .ovf and .vmdk files). Launch VirtualBox , click Tools , then click Import , choose the ovf file, then proceed with default settings. Note Both the username and password of the virtual machine are vagrant . Note By default the virtual machine can maximally use 4 GB of RAM. If your computer has 16 GB or more RAM, it is recommended to allocate 8 GB of RAM to the virtual machine. Note The virtual machine image already has docker installed. Note As you may have guessed, the virtual machine image has gcc 1 , ROOT , python3 , and a couple of other Python packages 2 , already installed, including pip . gcc must be recent enough to support c++17 standard. Effectively, gcc 6 or newer is required. \u21a9 \u21a9 These packages are listed in <project_root>/requirements.txt . It is highly recommended to install pip to manage Python packages. It is also highly recommended to use pyenv and pyenv-virtualenv to manage Python enviroments. Please google the installation instructions for your OS. \u21a9 \u21a9 clang-format usually comes with clang . A notable exception is on macOS. In that case, just type in brew install clang-format . \u21a9","title":"Installing dependencies"},{"location":"ntupling/installation/#install-vcs-git-and-git-annex","text":"We use git to version-control the ntupling code and the wiki, and git-annex to version-control large files, mostly the input .dst files or important .root outputs. For more details on git-annex , see this brief introduction . On Arch Linux, simply issue the following command to install both programs: sudo pacman -S git git-annex On macOS, if you have homebrew installed: brew install git git-annex Now clone the repository and set up the annex component. We have a private server, julian , that hosts git-annex files. You will need to send us a SSH key so that we can give your read/write permission to the server. git clone git@github.com:umd-lhcb/lhcb-ntuples-gen cd lhcb-ntuples-gen git remote add julian git@129.2.92.92:lhcb-ntuples-gen git annex init --version=7 git annex sync --no-pull julian git annex sync julian Note that these commands will only initialize the files controlled by git-annex (several GB in total) with symbolic links. You typically will download individual files as you need them with git annex get <path_to_file> Microsoft Windows and Ubuntu not supported, require pre-build image below Windows filesystems don't support symbolic links, which makes git-annex almost unusable. In Ubuntu there is no easy way to install an up-to-date git-annex . Please use the pre-built image listed in this section that has everything installed. Note that VirtualBox needs to be installed on Ubuntu manually first.","title":"Install VCS (git and git-annex)"},{"location":"ntupling/installation/#install-docker-to-run-davinci-locally","text":"We use docker to run a pre-built DaVinci image locally. To install docker : On Arch Linux run the command below and follow this Arch wiki entry to finish the setup: sudo pacman -S docker On macOS, with homebrew : brew install docker Now it's time to pull (download) the pre-built DaVinci docker: docker pull umdlhcb/lhcb-stack-cc7:DaVinci-v45r3-SL","title":"Install docker to run DaVinci locally"},{"location":"ntupling/installation/#install-dependencies-for-babymaker","text":"babymaker is part of the pyBabyMaker Python package. It requires gcc 1 , ROOT , python3 , and a couple of other Python packages 2 . Note It is strongly recommended to install clang-format 3 , so the generated C++ code looks much nicer. Install these tools with your choice of package manager. To install pyBabyMaker and other required Python packages, you can use the following command: pip3 install --user -r requirements.txt","title":"Install dependencies for babymaker"},{"location":"ntupling/installation/#install-dependencies-for-plotting","text":"The comparison plots in this page require pyTuplingUtils , which is install as follows git clone git@github.com:umd-lhcb/pyTuplingUtils cd pyTuplingUtils/ python3 setup.py build python3 setup.py install","title":"Install dependencies for plotting"},{"location":"ntupling/installation/#use-a-pre-built-virtualbox-image-on-windows-and-ubuntu","text":"The pre-built VirtualBox image is based on Arch Linux. It contains git , git-annex ; docker ( DaVinci image not downloaded); all babymaker dependencies ( Python packages not installed); sublime text editor. To use the virtual machine image, Please follow these steps on Microsoft Windows: Download and install the latest VirtualBox from here . Download the pre-built image from here (choose the latest date, then download both .ovf and .vmdk files). Launch VirtualBox , click Tools , then click Import , choose the ovf file, then proceed with default settings. Note Both the username and password of the virtual machine are vagrant . Note By default the virtual machine can maximally use 4 GB of RAM. If your computer has 16 GB or more RAM, it is recommended to allocate 8 GB of RAM to the virtual machine. Note The virtual machine image already has docker installed. Note As you may have guessed, the virtual machine image has gcc 1 , ROOT , python3 , and a couple of other Python packages 2 , already installed, including pip . gcc must be recent enough to support c++17 standard. Effectively, gcc 6 or newer is required. \u21a9 \u21a9 These packages are listed in <project_root>/requirements.txt . It is highly recommended to install pip to manage Python packages. It is also highly recommended to use pyenv and pyenv-virtualenv to manage Python enviroments. Please google the installation instructions for your OS. \u21a9 \u21a9 clang-format usually comes with clang . A notable exception is on macOS. In that case, just type in brew install clang-format . \u21a9","title":"Use a pre-built VirtualBox image on Windows and Ubuntu"},{"location":"ntupling/step1_davinci/","text":"DaVinci is the LHCb package that runs preliminary selections and calculations on the raw .dst data, and produces .root files. It is often run on LHC remote Linux nodes lxplus . However, it is much more convenient to have a local DaVinci environment in a docker with a configuration that is easily shared. After the docker is pulled as described in the dependencies , it is lauched from inside the repository with cd lhcb-ntuples-gen docker run --rm -it -v `pwd`:/data -e UID=$(id -u) -e GID=$(id -g) --net=host umdlhcb/lhcb-stack-cc7:DaVinci-v42r8p1-SL This command mounts the current directory ( pwd ) into the docker, so it has access to all the code in lhcb-ntuples-gen and allows you to modify it outside of the docker . Inside the docker , DaVinci is run with lb-run DaVinci/latest gaudirun.py <ntuple_options1> <ntuple_options2> ... as in lxplus . We often will have scripts that facilitate this. For instance, to run on Run 2 data (note that downloading the 1-3 GB .dst files from the annex takes several minutes), type in the docker cd run2-b2D0MuXB2DMuForTauMuLine git annex get data/data-2016-mag_down/00069527_00003141_1.semileptonic.dst # 1.2 GB git annex get data/data-2016-mag_down/00069529_00017556_1.semileptonic.dst # 3.5 GB ./run.sh reco_Dst.py conds/cond-data-2016-Dst.py The first argument, reco_Dst.py , is the script that makes the D^{*+}(\\to D^0(\\to K^+\\pi^-)\\pi^+)\\mu^- D^{*+}(\\to D^0(\\to K^+\\pi^-)\\pi^+)\\mu^- reconstruction. It also sets how many events to run at most ( EvtMax ) and the print frequency ( PrintFreq ). The second argument, conds/cond-data-2016-Dst.py , sets the type of input data (Data or MC), the input files and the name of the output file ( BCands_Dst-data.root in this case). Running DaVinci on the GRID We need to build a local DaVinci to add our tools. This local version will then be sent to the GRID by ganga automatically. For DaVinci-v42r8p1 , refer to this Dockerfile for build instructions. Then, for each of the stripping line folder inside this project, there should be a Python scripted named ganga_jobs.py . The general syntax is: ganga ganga_jobs.py <arguments> For instance, for signal Monte Carlo ganga ganga_jobs.py mc-py6-sim08a-Bd2Dsttaunu The general usage of ganga_jobs.py is described in its help file $ ganga ganga_jobs.py --help usage: ganga_jobs.py [-h] [--force] [--davinci DAVINCI] [-b {all,Dst,D0} [{all,Dst,D0} ...]] [-s {all,Pythia6,Pythia8} [{all,Pythia6,Pythia8} ...]] [-c {all,Sim08a,Sim08e,Sim08h,Sim08i} [{all,Sim08a,Sim08e,Sim08h,Sim08i} ...]] [-p {all,Up,Down} [{all,Up,Down} ...]] {all,data-2012-Dst,mc-Bd2DststMuNu2D0,mc-Bd2DststTauNu2D0,mc-Bs2DststMuNu2D0,mc-Bu2DststMuNu2D0,mc-Bd2DstTauNu,mc-Bd2DstMuNu,mc-Bu2Dst0TauNu,mc-Bu2Dst0MuNu,mc-Bu2D0TauNu,mc-Bu2D0MuNu,mc-Bd2D0DX2MuX,mc-Bu2D0DX2MuX,mc-Bd2D0DsX2TauNu,mc-Bu2D0DsX2TauNu} [{all,data-2012-Dst,mc-Bd2DststMuNu2D0,mc-Bd2DststTauNu2D0,mc-Bs2DststMuNu2D0,mc-Bu2DststMuNu2D0,mc-Bd2DstTauNu,mc-Bd2DstMuNu,mc-Bu2Dst0TauNu,mc-Bu2Dst0MuNu,mc-Bu2D0TauNu,mc-Bu2D0MuNu,mc-Bd2D0DX2MuX,mc-Bu2D0DX2MuX,mc-Bd2D0DsX2TauNu,mc-Bu2D0DsX2TauNu} ...] ganga script to process R(D*) run 1 data/MC. positional arguments: {all,data-2012-Dst,mc-Bd2DststMuNu2D0,mc-Bd2DststTauNu2D0,mc-Bs2DststMuNu2D0,mc-Bu2DststMuNu2D0,mc-Bd2DstTauNu,mc-Bd2DstMuNu,mc-Bu2Dst0TauNu,mc-Bu2Dst0MuNu,mc-Bu2D0TauNu,mc-Bu2D0MuNu,mc-Bd2D0DX2MuX,mc-Bu2D0DX2MuX,mc-Bd2D0DsX2TauNu,mc-Bu2D0DsX2TauNu} specify data type. optional arguments: -h, --help show this help message and exit --force if this flag is supplied, don't skip existing jobs with the same name. --davinci DAVINCI specify path to local DaVinci build. -b {all,Dst,D0} [{all,Dst,D0} ...], --base {all,Dst,D0} [{all,Dst,D0} ...] specify base decay mode (e.g. D* or D0). -s {all,Pythia6,Pythia8} [{all,Pythia6,Pythia8} ...], --simulation {all,Pythia6,Pythia8} [{all,Pythia6,Pythia8} ...] specify simulation (typically Pythia) software package version. -c {all,Sim08a,Sim08e,Sim08h,Sim08i} [{all,Sim08a,Sim08e,Sim08h,Sim08i} ...], --condition {all,Sim08a,Sim08e,Sim08h,Sim08i} [{all,Sim08a,Sim08e,Sim08h,Sim08i} ...] specify simulation condition. -p {all,Up,Down} [{all,Up,Down} ...], --polarity {all,Up,Down} [{all,Up,Down} ...] specify polarity.","title":"Step 1 ntuples with Davinci"},{"location":"ntupling/step1_davinci/#running-davinci-on-the-grid","text":"We need to build a local DaVinci to add our tools. This local version will then be sent to the GRID by ganga automatically. For DaVinci-v42r8p1 , refer to this Dockerfile for build instructions. Then, for each of the stripping line folder inside this project, there should be a Python scripted named ganga_jobs.py . The general syntax is: ganga ganga_jobs.py <arguments> For instance, for signal Monte Carlo ganga ganga_jobs.py mc-py6-sim08a-Bd2Dsttaunu The general usage of ganga_jobs.py is described in its help file $ ganga ganga_jobs.py --help usage: ganga_jobs.py [-h] [--force] [--davinci DAVINCI] [-b {all,Dst,D0} [{all,Dst,D0} ...]] [-s {all,Pythia6,Pythia8} [{all,Pythia6,Pythia8} ...]] [-c {all,Sim08a,Sim08e,Sim08h,Sim08i} [{all,Sim08a,Sim08e,Sim08h,Sim08i} ...]] [-p {all,Up,Down} [{all,Up,Down} ...]] {all,data-2012-Dst,mc-Bd2DststMuNu2D0,mc-Bd2DststTauNu2D0,mc-Bs2DststMuNu2D0,mc-Bu2DststMuNu2D0,mc-Bd2DstTauNu,mc-Bd2DstMuNu,mc-Bu2Dst0TauNu,mc-Bu2Dst0MuNu,mc-Bu2D0TauNu,mc-Bu2D0MuNu,mc-Bd2D0DX2MuX,mc-Bu2D0DX2MuX,mc-Bd2D0DsX2TauNu,mc-Bu2D0DsX2TauNu} [{all,data-2012-Dst,mc-Bd2DststMuNu2D0,mc-Bd2DststTauNu2D0,mc-Bs2DststMuNu2D0,mc-Bu2DststMuNu2D0,mc-Bd2DstTauNu,mc-Bd2DstMuNu,mc-Bu2Dst0TauNu,mc-Bu2Dst0MuNu,mc-Bu2D0TauNu,mc-Bu2D0MuNu,mc-Bd2D0DX2MuX,mc-Bu2D0DX2MuX,mc-Bd2D0DsX2TauNu,mc-Bu2D0DsX2TauNu} ...] ganga script to process R(D*) run 1 data/MC. positional arguments: {all,data-2012-Dst,mc-Bd2DststMuNu2D0,mc-Bd2DststTauNu2D0,mc-Bs2DststMuNu2D0,mc-Bu2DststMuNu2D0,mc-Bd2DstTauNu,mc-Bd2DstMuNu,mc-Bu2Dst0TauNu,mc-Bu2Dst0MuNu,mc-Bu2D0TauNu,mc-Bu2D0MuNu,mc-Bd2D0DX2MuX,mc-Bu2D0DX2MuX,mc-Bd2D0DsX2TauNu,mc-Bu2D0DsX2TauNu} specify data type. optional arguments: -h, --help show this help message and exit --force if this flag is supplied, don't skip existing jobs with the same name. --davinci DAVINCI specify path to local DaVinci build. -b {all,Dst,D0} [{all,Dst,D0} ...], --base {all,Dst,D0} [{all,Dst,D0} ...] specify base decay mode (e.g. D* or D0). -s {all,Pythia6,Pythia8} [{all,Pythia6,Pythia8} ...], --simulation {all,Pythia6,Pythia8} [{all,Pythia6,Pythia8} ...] specify simulation (typically Pythia) software package version. -c {all,Sim08a,Sim08e,Sim08h,Sim08i} [{all,Sim08a,Sim08e,Sim08h,Sim08i} ...], --condition {all,Sim08a,Sim08e,Sim08h,Sim08i} [{all,Sim08a,Sim08e,Sim08h,Sim08i} ...] specify simulation condition. -p {all,Up,Down} [{all,Up,Down} ...], --polarity {all,Up,Down} [{all,Up,Down} ...] specify polarity.","title":"Running DaVinci on the GRID"},{"location":"ntupling/step2_babymaker/","text":"babymaker is a part of the pyBabyMaker library. Please refer to the official document for more info. The general idea is that babymaker takes: a YAML file as configuration a .root ntuple file to dump its tree structure and datatype. and generates a C++ file. The generated file then will be compiled, and the compiled binary will be used to generate second stage .root ntuples.","title":"Step 2 ntuples with babymaker"},{"location":"physics/momentum_scaling/","text":"For data processing, at LHCb: Scale the data momentum, because data measurements are biased. This bias can be detected and calibrated using some well-known decay mode (such as J/\\Psi \\rightarrow \\mu \\mu J/\\Psi \\rightarrow \\mu \\mu ). Smear the MC momentum, because MC measurements are too good.","title":"Momentum scaling"},{"location":"physics/wrong_sign_particles/","text":"Note that we are not guaranteed to be reconstructing real particles. Instead, we are looking at combinations of reconstructed tracks with specific properties consistent with originating from a common vertex. These reconstructed particles may original from different mothers---they may still pass our vertexing criteria by sheer coincidence combined with resolution effects and the fact that tracks don't have an origin point. By looking at wrong-sign combinations, we get a pure sample of \"candidates\" that did not originate from a common mother (charged was not conserved in this \"decay\" mode, so it is not physical). We can be absolutely sure that no signal or physics background contaminates these samples because there is no such thing as a B^{++} B^{++} (again, charge not conserved). Therefore, these combinations can be used to study and model these random combinations of tracks that pass our selection. A caveat to remember is that the wrong-sign combinations are not guaranteed to look exactly like the background in the right-sign we are trying to understand. This is where the candidates with mass greater than m_B m_B come in handy. Here we know neither the right-sign nor the wrong-sign has any physics candidates in them, and we can see how the two differ.","title":"Wrong-sign particles"},{"location":"software_manuals/bender/","text":"bender is a tool to interactively explore .dst files. Find all trigger lines and hit ratios in a .dst file There is a simple one-liner to find these info: lb-run Bender/latest trg-check -n -1 -d 2012 --teslocation /Event/Semileptonic/Phys/b2D0MuXB2DMuNuForTauMuLine/Particles <path_to_dst> Note -n -1 is number of events to run over; -1 means all. Default is 1000 . -d 2012 specify the data type (year). Dump TES info from a .dst file lb-run Bender/latest dst-dump -d 2016 -f -n 100 <path_to_dst> Note -f means that try to unpack all TES locations.","title":"bender"},{"location":"software_manuals/bender/#find-all-trigger-lines-and-hit-ratios-in-a-dst-file","text":"There is a simple one-liner to find these info: lb-run Bender/latest trg-check -n -1 -d 2012 --teslocation /Event/Semileptonic/Phys/b2D0MuXB2DMuNuForTauMuLine/Particles <path_to_dst> Note -n -1 is number of events to run over; -1 means all. Default is 1000 . -d 2012 specify the data type (year).","title":"Find all trigger lines and hit ratios in a .dst file"},{"location":"software_manuals/bender/#dump-tes-info-from-a-dst-file","text":"lb-run Bender/latest dst-dump -d 2016 -f -n 100 <path_to_dst> Note -f means that try to unpack all TES locations.","title":"Dump TES info from a .dst file"},{"location":"software_manuals/external/","text":"Trigger Configuration Key (TCK) This TWiki explains briefly how to use TCKsh to study TCKs. This page some TCK info for LHCb. !!! note This link have .pdf files that list all TCKs for a given period of time. For example, the 2012 year-end report listed all TCKs (such as 0x8C0040 ) in year 2012, and TCK vs. time.","title":"External manuals"},{"location":"software_manuals/external/#trigger-configuration-key-tck","text":"This TWiki explains briefly how to use TCKsh to study TCKs. This page some TCK info for LHCb. !!! note This link have .pdf files that list all TCKs for a given period of time. For example, the 2012 year-end report listed all TCKs (such as 0x8C0040 ) in year 2012, and TCK vs. time.","title":"Trigger Configuration Key (TCK)"},{"location":"software_manuals/ganga/","text":"We use ganga and other tools to submit our DaVinci jobs to LHCb grid. Prepare a local DaVinci We need to build a local DaVinci to add our tools. This local verison will then be sent to the grid by ganga automatically. For DaVinci-v42r8p1 , please refer to this Dockerfile for build instructions. For newer version of DaVinci , please refer to the master branch Dockerfile Send job to the grid with ganga For each of the stripping line folder inside this project, there should be a Python scripted named ganga_jobs.py . The general sematics is: ganga ganga_jobs.py <arguments> run1-b2D0MuXB2DMuNuForTauMuLine $ ganga ganga_jobs.py --help usage: ganga_jobs.py [-h] [--force] [--davinci DAVINCI] [-b {all,Dst,D0,Dst-cutflow} [{all,Dst,D0,Dst-cutflow} ...]] [-s {all,Pythia6,Pythia8} [{all,Pythia6,Pythia8} ...]] [-c {all,Sim08a,Sim08e,Sim08h,Sim08i} [{all,Sim08a,Sim08e,Sim08h,Sim08i} ...]] [-p {all,Up,Down} [{all,Up,Down} ...]] {all,data-2012-Dst,cocktail-2011-Dst-cutflow,mc-Bd2DststMuNu2D0,mc-Bd2DststTauNu2D0,mc-Bs2DststMuNu2D0,mc-Bu2DststMuNu2D0,mc-Bd2DstTauNu,mc-Bd2DstMuNu,mc-Bu2Dst0TauNu,mc-Bu2Dst0MuNu,mc-Bu2D0TauNu,mc-Bu2D0MuNu,mc-Bd2D0DX2MuX,mc-Bu2D0DX2MuX,mc-Bd2D0 DsX2TauNu,mc-Bu2D0DsX2TauNu} [{all,data-2012-Dst,cocktail-2011-Dst-cutflow,mc-Bd2DststMuNu2D0,mc-Bd2DststTauNu2D0,mc-Bs2DststMuNu2D0,mc-Bu2DststMuNu2D0,mc-Bd2DstTauNu,mc-Bd2DstMuNu,mc-Bu2Dst0TauNu,mc-Bu2Dst0MuNu,mc-Bu2D0TauNu,mc-Bu2D0MuNu,mc-Bd2D0DX2MuX,mc-Bu2D0DX2MuX,mc-Bd2D 0DsX2TauNu,mc-Bu2D0DsX2TauNu} ...] ganga script to process R(D*) run 1 data/MC. positional arguments: {all,data-2012-Dst,cocktail-2011-Dst-cutflow,mc-Bd2DststMuNu2D0,mc-Bd2DststTauNu2D0,mc-Bs2DststMuNu2D0,mc-Bu2DststMuNu2D0,mc-Bd2DstTauNu,mc-Bd2DstMuNu,mc-Bu2Dst0TauNu,mc-Bu2Dst0MuNu,mc-Bu2D0TauNu,mc-Bu2D0MuNu,mc-Bd2D0DX2MuX,mc-Bu2D0DX2MuX,mc-Bd2D0DsX2TauNu,mc-Bu2D0D sX2TauNu} specify data type. optional arguments: -h, --help show this help message and exit --force if this flag is supplied, don't skip existing jobs with the same name. --davinci DAVINCI specify path to local DaVinci build. -b {all,Dst,D0,Dst-cutflow} [{all,Dst,D0,Dst-cutflow} ...], --base {all,Dst,D0,Dst-cutflow} [{all,Dst,D0,Dst-cutflow} ...] specify base decay mode (e.g. D* or D0). -s {all,Pythia6,Pythia8} [{all,Pythia6,Pythia8} ...], --simulation {all,Pythia6,Pythia8} [{all,Pythia6,Pythia8} ...] specify simulation (typically Pythia) software package version. -c {all,Sim08a,Sim08e,Sim08h,Sim08i} [{all,Sim08a,Sim08e,Sim08h,Sim08i} ...], --condition {all,Sim08a,Sim08e,Sim08h,Sim08i} [{all,Sim08a,Sim08e,Sim08h,Sim08i} ...] specify simulation condition. -p {all,Up,Down} [{all,Up,Down} ...], --polarity {all,Up,Down} [{all,Up,Down} ...] specify polarity. An example would be: ganga ganga_jobs.py mc-py6-sim08a-Bd2Dsttaunu","title":"ganga"},{"location":"software_manuals/ganga/#prepare-a-local-davinci","text":"We need to build a local DaVinci to add our tools. This local verison will then be sent to the grid by ganga automatically. For DaVinci-v42r8p1 , please refer to this Dockerfile for build instructions. For newer version of DaVinci , please refer to the master branch Dockerfile","title":"Prepare a local DaVinci"},{"location":"software_manuals/ganga/#send-job-to-the-grid-with-ganga","text":"For each of the stripping line folder inside this project, there should be a Python scripted named ganga_jobs.py . The general sematics is: ganga ganga_jobs.py <arguments>","title":"Send job to the grid with ganga"},{"location":"software_manuals/ganga/#run1-b2d0muxb2dmunufortaumuline","text":"$ ganga ganga_jobs.py --help usage: ganga_jobs.py [-h] [--force] [--davinci DAVINCI] [-b {all,Dst,D0,Dst-cutflow} [{all,Dst,D0,Dst-cutflow} ...]] [-s {all,Pythia6,Pythia8} [{all,Pythia6,Pythia8} ...]] [-c {all,Sim08a,Sim08e,Sim08h,Sim08i} [{all,Sim08a,Sim08e,Sim08h,Sim08i} ...]] [-p {all,Up,Down} [{all,Up,Down} ...]] {all,data-2012-Dst,cocktail-2011-Dst-cutflow,mc-Bd2DststMuNu2D0,mc-Bd2DststTauNu2D0,mc-Bs2DststMuNu2D0,mc-Bu2DststMuNu2D0,mc-Bd2DstTauNu,mc-Bd2DstMuNu,mc-Bu2Dst0TauNu,mc-Bu2Dst0MuNu,mc-Bu2D0TauNu,mc-Bu2D0MuNu,mc-Bd2D0DX2MuX,mc-Bu2D0DX2MuX,mc-Bd2D0 DsX2TauNu,mc-Bu2D0DsX2TauNu} [{all,data-2012-Dst,cocktail-2011-Dst-cutflow,mc-Bd2DststMuNu2D0,mc-Bd2DststTauNu2D0,mc-Bs2DststMuNu2D0,mc-Bu2DststMuNu2D0,mc-Bd2DstTauNu,mc-Bd2DstMuNu,mc-Bu2Dst0TauNu,mc-Bu2Dst0MuNu,mc-Bu2D0TauNu,mc-Bu2D0MuNu,mc-Bd2D0DX2MuX,mc-Bu2D0DX2MuX,mc-Bd2D 0DsX2TauNu,mc-Bu2D0DsX2TauNu} ...] ganga script to process R(D*) run 1 data/MC. positional arguments: {all,data-2012-Dst,cocktail-2011-Dst-cutflow,mc-Bd2DststMuNu2D0,mc-Bd2DststTauNu2D0,mc-Bs2DststMuNu2D0,mc-Bu2DststMuNu2D0,mc-Bd2DstTauNu,mc-Bd2DstMuNu,mc-Bu2Dst0TauNu,mc-Bu2Dst0MuNu,mc-Bu2D0TauNu,mc-Bu2D0MuNu,mc-Bd2D0DX2MuX,mc-Bu2D0DX2MuX,mc-Bd2D0DsX2TauNu,mc-Bu2D0D sX2TauNu} specify data type. optional arguments: -h, --help show this help message and exit --force if this flag is supplied, don't skip existing jobs with the same name. --davinci DAVINCI specify path to local DaVinci build. -b {all,Dst,D0,Dst-cutflow} [{all,Dst,D0,Dst-cutflow} ...], --base {all,Dst,D0,Dst-cutflow} [{all,Dst,D0,Dst-cutflow} ...] specify base decay mode (e.g. D* or D0). -s {all,Pythia6,Pythia8} [{all,Pythia6,Pythia8} ...], --simulation {all,Pythia6,Pythia8} [{all,Pythia6,Pythia8} ...] specify simulation (typically Pythia) software package version. -c {all,Sim08a,Sim08e,Sim08h,Sim08i} [{all,Sim08a,Sim08e,Sim08h,Sim08i} ...], --condition {all,Sim08a,Sim08e,Sim08h,Sim08i} [{all,Sim08a,Sim08e,Sim08h,Sim08i} ...] specify simulation condition. -p {all,Up,Down} [{all,Up,Down} ...], --polarity {all,Up,Down} [{all,Up,Down} ...] specify polarity. An example would be: ganga ganga_jobs.py mc-py6-sim08a-Bd2Dsttaunu","title":"run1-b2D0MuXB2DMuNuForTauMuLine"},{"location":"software_manuals/git_annex/","text":"It is harder to manage large (100 MB or more) files in git , as checking them in/out would take a much longer time. Also, it is undesirable to expose raw data outside of the collaboration. We use a git addon, git-annex , to manage large files. git-annex stores all tracked files under <project_root>/.git/annex , and link/copy these files to the expected locations. Initialize git-annex repository We have a private server 1 that hosts git repositories with git-annex capabilities. After cloning the umd-lhcb/lhcb-ntuples-gen repository from github, add our private repository: git remote add julian git@129.2.92.92:lhcb-ntuples-gen Note Please send us a SSH key so that we can give your read/write permission on the git-annex repository. Then we need to initialize the annex component: git annex init --version=7 Warning It is important to use a git-annex repository of v7 or newer! 2 To upgrade your git-annex repository to at least v7 , issue the following command inside your git repository: git annex upgrade Note Dropbox will not synchronize any symbolic links, so if the repository is placed within your Dropbox folder, and you have multiple computers, the symbolic links will be replaced by the actual files on all but the initial computers. Add files If you are adding large files that are unlikely to change in the future, such as .dst data files, use the following command: git annex add <path_to_file> If you want to add large files that are likely to change, such as .root ntuples generated by DaVinci , use regular git add command: git add <path_to_file> Note git add will add files to the git repository, not git-annex repository by default . Configuration is required to add only .root files to git-annex , and the rest to git . This has been done for this repository, in: <project_root>/.gitattributes` See this article for more information on configuring .gitattributes . Change annexed files Files added via git annex add are read only. For example: echo change > <path_to_annexed_file> > bash: <annexed_file>: Permission denied To change them, we need to unlock them first: git annex unlock <path_to_annexed_file> Now you can edit the unlocked file as you wish. After editing, use git annex add to keep the changes and lock it again. Note When you commit, git-annex will notice that you are committing an unlocked file, add its new content. A pointer to that content is what gets committed to git ; the actual content will go to git-annex . Warning If you don't need to modify the file after all, or want to discard modifications, use git annex lock . Doing so will result in all modifications discarded. Proceed with care! Files added via git add can be changed just like a regular file. Synchronize files between local and remote repositories The simplest, but potentially dangerous because it may cause merge conflicts, method is: git annex sync julian A safer, two-step process is: git annex sync --no-pull julian git annex sync julian Warning The two separate steps are needed to avoid unnecessary merge conflicts. If you want to download every single file from the git-annex repo (which is probably a couple of GBs), add the --content flag in the second step and download not only the metadata, but also the data: git annex sync --no-pull julian git annex sync --content julian Download individual files This is simple: git annex get <path_to_files> Drop local files The following command will remove the local copy of the file only , and will not delete the file from remote 3 : git annex drop <path_to_files> Note git would still think the working directory is clean, i.e. no change has been made. As of now, the server is sitting on Yipeng's desktop. It is named Julian , after Julian Schwinger . \u21a9 Please read this for the rationale. \u21a9 Deleting files from remote is dangerous! As the remote might be the last copy of the file so we may lose the file permanently. Still, if you insist, please refer to the official guide . \u21a9","title":"git-annex"},{"location":"software_manuals/git_annex/#initialize-git-annex-repository","text":"We have a private server 1 that hosts git repositories with git-annex capabilities. After cloning the umd-lhcb/lhcb-ntuples-gen repository from github, add our private repository: git remote add julian git@129.2.92.92:lhcb-ntuples-gen Note Please send us a SSH key so that we can give your read/write permission on the git-annex repository. Then we need to initialize the annex component: git annex init --version=7 Warning It is important to use a git-annex repository of v7 or newer! 2 To upgrade your git-annex repository to at least v7 , issue the following command inside your git repository: git annex upgrade Note Dropbox will not synchronize any symbolic links, so if the repository is placed within your Dropbox folder, and you have multiple computers, the symbolic links will be replaced by the actual files on all but the initial computers.","title":"Initialize git-annex repository"},{"location":"software_manuals/git_annex/#add-files","text":"If you are adding large files that are unlikely to change in the future, such as .dst data files, use the following command: git annex add <path_to_file> If you want to add large files that are likely to change, such as .root ntuples generated by DaVinci , use regular git add command: git add <path_to_file> Note git add will add files to the git repository, not git-annex repository by default . Configuration is required to add only .root files to git-annex , and the rest to git . This has been done for this repository, in: <project_root>/.gitattributes` See this article for more information on configuring .gitattributes .","title":"Add files"},{"location":"software_manuals/git_annex/#change-annexed-files","text":"Files added via git annex add are read only. For example: echo change > <path_to_annexed_file> > bash: <annexed_file>: Permission denied To change them, we need to unlock them first: git annex unlock <path_to_annexed_file> Now you can edit the unlocked file as you wish. After editing, use git annex add to keep the changes and lock it again. Note When you commit, git-annex will notice that you are committing an unlocked file, add its new content. A pointer to that content is what gets committed to git ; the actual content will go to git-annex . Warning If you don't need to modify the file after all, or want to discard modifications, use git annex lock . Doing so will result in all modifications discarded. Proceed with care! Files added via git add can be changed just like a regular file.","title":"Change annexed files"},{"location":"software_manuals/git_annex/#synchronize-files-between-local-and-remote-repositories","text":"The simplest, but potentially dangerous because it may cause merge conflicts, method is: git annex sync julian A safer, two-step process is: git annex sync --no-pull julian git annex sync julian Warning The two separate steps are needed to avoid unnecessary merge conflicts. If you want to download every single file from the git-annex repo (which is probably a couple of GBs), add the --content flag in the second step and download not only the metadata, but also the data: git annex sync --no-pull julian git annex sync --content julian","title":"Synchronize files between local and remote repositories"},{"location":"software_manuals/git_annex/#download-individual-files","text":"This is simple: git annex get <path_to_files>","title":"Download individual files"},{"location":"software_manuals/git_annex/#drop-local-files","text":"The following command will remove the local copy of the file only , and will not delete the file from remote 3 : git annex drop <path_to_files> Note git would still think the working directory is clean, i.e. no change has been made. As of now, the server is sitting on Yipeng's desktop. It is named Julian , after Julian Schwinger . \u21a9 Please read this for the rationale. \u21a9 Deleting files from remote is dangerous! As the remote might be the last copy of the file so we may lose the file permanently. Still, if you insist, please refer to the official guide . \u21a9","title":"Drop local files"},{"location":"software_manuals/davinci/docker_image_usage/","text":"DaVinci is a LHCb software package that run various preliminary selections and calculations on the raw .dst file, and produce a .root file. Normally it is run on LHCb remote Linux nodes lxplus . However, it is much more convenient to have a local DaVinci environment. Launch a DaVinci container To launch a DaVinci docker container, type in: docker run --rm -it -v <src_path>:/data -e UID=$(id -u) -e GID=$(id -g) --net=host umdlhcb/lhcb-stack-cc7:DaVinci-v42r8p1-SL note that <src_path> should be an absolute path pointing to the folder that we want to mount inside the container. If you are in the folder you want to mount, you can just type: docker run --rm -it -v `pwd`:/data -e UID=$(id -u) -e GID=$(id -g) --net=host umdlhcb/lhcb-stack-cc7:DaVinci-v42r8p1-SL Note docker images are read-only. When we launch a docker container , a writable layer is placed on top of the image. Use DaVinci inside container The command is very similar to the one used on lxplus : lb-run DaVinci/latest gaudirun.py <ntuple_options1> <ntuple_options2> ... since we have only 1 version of DaVinci inside the container, DaVinci/latest would always work. Additional TupleTool The docker image with -SL suffix also contains a special DaVinci version that contains additional TupleTool 1 for semileptonic analysis. To access the special DaVinci , just substitute lb-run DaVinci/latest with run . For instance: run gaudirun.py <ntuple_options1> <ntuple_options2> ... Note To make our lives easier, a run.sh command is typically created in each stripping lines, such as: <project_root>/2012-b2D0MuXB2DMuNuForTauMuLine/gen.sh If you see this file, take a look at it to see the availabe commands, and run it inside the docker container: ./run.sh <path_to_cond_file> <path_to_reco_file> # inside docker optionally, a debug flag can be supplied so that only the first couple of events will be considered. Remove old docker images To list all local docker images: docker images If you download a newer version of docker image, and want to remove the old ones to save disk space, you can: docker rmi <docker_image_tag> docker image prune here <docker_image_tag> should be something like umdlhcb/lhcb-stack-cc7:DaVinci-v42r8p1-SL . Such as TupleToolApplyIsolation and TupleToolTauMuDiscVars . \u21a9","title":"Docker image usage"},{"location":"software_manuals/davinci/docker_image_usage/#launch-a-davinci-container","text":"To launch a DaVinci docker container, type in: docker run --rm -it -v <src_path>:/data -e UID=$(id -u) -e GID=$(id -g) --net=host umdlhcb/lhcb-stack-cc7:DaVinci-v42r8p1-SL note that <src_path> should be an absolute path pointing to the folder that we want to mount inside the container. If you are in the folder you want to mount, you can just type: docker run --rm -it -v `pwd`:/data -e UID=$(id -u) -e GID=$(id -g) --net=host umdlhcb/lhcb-stack-cc7:DaVinci-v42r8p1-SL Note docker images are read-only. When we launch a docker container , a writable layer is placed on top of the image.","title":"Launch a DaVinci container"},{"location":"software_manuals/davinci/docker_image_usage/#use-davinci-inside-container","text":"The command is very similar to the one used on lxplus : lb-run DaVinci/latest gaudirun.py <ntuple_options1> <ntuple_options2> ... since we have only 1 version of DaVinci inside the container, DaVinci/latest would always work.","title":"Use DaVinci inside container"},{"location":"software_manuals/davinci/docker_image_usage/#additional-tupletool","text":"The docker image with -SL suffix also contains a special DaVinci version that contains additional TupleTool 1 for semileptonic analysis. To access the special DaVinci , just substitute lb-run DaVinci/latest with run . For instance: run gaudirun.py <ntuple_options1> <ntuple_options2> ... Note To make our lives easier, a run.sh command is typically created in each stripping lines, such as: <project_root>/2012-b2D0MuXB2DMuNuForTauMuLine/gen.sh If you see this file, take a look at it to see the availabe commands, and run it inside the docker container: ./run.sh <path_to_cond_file> <path_to_reco_file> # inside docker optionally, a debug flag can be supplied so that only the first couple of events will be considered.","title":"Additional TupleTool"},{"location":"software_manuals/davinci/docker_image_usage/#remove-old-docker-images","text":"To list all local docker images: docker images If you download a newer version of docker image, and want to remove the old ones to save disk space, you can: docker rmi <docker_image_tag> docker image prune here <docker_image_tag> should be something like umdlhcb/lhcb-stack-cc7:DaVinci-v42r8p1-SL . Such as TupleToolApplyIsolation and TupleToolTauMuDiscVars . \u21a9","title":"Remove old docker images"},{"location":"software_manuals/davinci/loki_functors/","text":"TIS functor TIS is a (undocumented) LoKi functor\uff0c and it stands for Trigger Independent Signal . There's another similar term: TOS: Trigger On Signal . Functor usage TIS(<trigger_line_to_look>, <trigger_decision_storage_location>) Note <trigger_decision_storage_location> is a TES location An example from lhcb-ana-2014-052-v2r1 INTREE (( ABSID == 'mu+' ) & ( TIS ( 'L0.*' , 'L0TriggerTisTos' ))) The line above should be interpreted as following: In the decay tree, find a \\mu \\mu . We look over all L0.* trigger lines with TES L0TriggerTisTos , and require to have a trigger independent signal: Since we are triggering on \\mu \\mu , this requires that the trigger cannot be due to the \\mu \\mu . Also note that the whole decay tree is just a \\mu \\mu and a D D , so it means that we are either TOS on D D , TIS in the whole event, or both.","title":"LoKi functors"},{"location":"software_manuals/davinci/loki_functors/#tis-functor","text":"TIS is a (undocumented) LoKi functor\uff0c and it stands for Trigger Independent Signal . There's another similar term: TOS: Trigger On Signal .","title":"TIS functor"},{"location":"software_manuals/davinci/loki_functors/#functor-usage","text":"TIS(<trigger_line_to_look>, <trigger_decision_storage_location>) Note <trigger_decision_storage_location> is a TES location","title":"Functor usage"},{"location":"software_manuals/davinci/loki_functors/#an-example-from-lhcb-ana-2014-052-v2r1","text":"INTREE (( ABSID == 'mu+' ) & ( TIS ( 'L0.*' , 'L0TriggerTisTos' ))) The line above should be interpreted as following: In the decay tree, find a \\mu \\mu . We look over all L0.* trigger lines with TES L0TriggerTisTos , and require to have a trigger independent signal: Since we are triggering on \\mu \\mu , this requires that the trigger cannot be due to the \\mu \\mu . Also note that the whole decay tree is just a \\mu \\mu and a D D , so it means that we are either TOS on D D , TIS in the whole event, or both.","title":"An example from lhcb-ana-2014-052-v2r1"},{"location":"software_manuals/davinci/tips_and_tricks/","text":"About GaudiSequencer GaudiSequencer is an per-event algorithm , such as DecayTreeTuple , in the sense that Gaudi knows that it should run on every event. GaudiSequencer is used to chain related algorithms, and it's default behavior is to only run an algorithm if the preceding algorithm passed (this is done in the c++ class for the algorithm by returning StatusCode::SUCCESS ). This default can be overridden by setting GaudiSequencer.IgnoreFilterPassed to True , which will run all the algorithms regardless of whether the preceding one passed or failed. The list of algorithms to run is defined by the GaudiSequencer.Members list. Difference between MainSequence and UserAlgorithms MainSequence : Use DaVinci().addToMainSequence([<a list of algorithms>]) to customize the initialization of DaVinci . This should be used to provide custom functions/TESs 1 that will be visible to all selection algorithms. UserAlgorithms : Actual selection algorithms. This is always appended at the end of the MainSequence of a DaVinci session. Difference CC and cc in a decay descriptor LoKi and DecayTreeTuple use uppercase CC for charge conjugation. CombineParticles uses lowercase cc . This is just an inconsistency in the DaVinci code base and there's nothing we can do as a user. TES: Transient Event Storage. \u21a9","title":"Tips and tricks"},{"location":"software_manuals/davinci/tips_and_tricks/#about-gaudisequencer","text":"GaudiSequencer is an per-event algorithm , such as DecayTreeTuple , in the sense that Gaudi knows that it should run on every event. GaudiSequencer is used to chain related algorithms, and it's default behavior is to only run an algorithm if the preceding algorithm passed (this is done in the c++ class for the algorithm by returning StatusCode::SUCCESS ). This default can be overridden by setting GaudiSequencer.IgnoreFilterPassed to True , which will run all the algorithms regardless of whether the preceding one passed or failed. The list of algorithms to run is defined by the GaudiSequencer.Members list.","title":"About GaudiSequencer"},{"location":"software_manuals/davinci/tips_and_tricks/#difference-between-mainsequence-and-useralgorithms","text":"MainSequence : Use DaVinci().addToMainSequence([<a list of algorithms>]) to customize the initialization of DaVinci . This should be used to provide custom functions/TESs 1 that will be visible to all selection algorithms. UserAlgorithms : Actual selection algorithms. This is always appended at the end of the MainSequence of a DaVinci session.","title":"Difference between MainSequence and UserAlgorithms"},{"location":"software_manuals/davinci/tips_and_tricks/#difference-cc-and-cc-in-a-decay-descriptor","text":"LoKi and DecayTreeTuple use uppercase CC for charge conjugation. CombineParticles uses lowercase cc . This is just an inconsistency in the DaVinci code base and there's nothing we can do as a user. TES: Transient Event Storage. \u21a9","title":"Difference CC and cc in a decay descriptor"},{"location":"software_manuals/davinci/tuple_tools/","text":"TupleToolApplyIsolation TupleToolApplyIsolation is used to find isolation variables for semileptonic decays. This allows us to identify actual B B meson decay vertices more readily. _ISOLATION_Type Among the many variables produced by this tool, these four are about track type of each track: _ISOLATION_Type _ISOLATION_Type2 _ISOLATION_Type3 _ISOLATION_Type4 Note These four tracks are the ones with the best BDT scores. For each of these variables, it admits 3 possible values of type float : 1.0 : VELO only, with no other compatible segments found 3.0 : Forward tracks, which are VELO+(TT)+downstream segment (TT hits optional) 4.0 : Upstream tracks, VELO+TT Note The type 1.0 tracks can be turned off by commenting out the following lines in reco_Dst.py : # Provide required information for VELO pions. ms_all_protos = ChargedProtoParticleMaker ( name = 'MyProtoPMaker' ) ms_all_protos . Inputs = [ 'Rec/Track/Best' ] ms_all_protos . Output = 'Rec/ProtoP/MyProtoPMaker/ProtoParticles' # This TES location will be accessible for all selection algorithms # VELO pions for Greg's isolation tool. # NOTE: The name 'StdNoPIDsVeloPions' is hard-coded in the tuple tool, so the # name should not be changed. ms_velo_pions = NoPIDsParticleMaker ( 'StdNoPIDsVeloPions' , Particle = 'pion' ) ms_velo_pions . Input = ms_all_protos . Output # NOTE: These two lines are needed to select particles in VELO only. # NOTE: DARK MAGIC. trackSelector ( ms_velo_pions , trackTypes = [ 'Velo' ]) updateDoD ( ms_velo_pions ) DaVinci () . appendToMainSequence ([ ms_all_protos , ms_velo_pions ])","title":"TupleTools"},{"location":"software_manuals/davinci/tuple_tools/#tupletoolapplyisolation","text":"TupleToolApplyIsolation is used to find isolation variables for semileptonic decays. This allows us to identify actual B B meson decay vertices more readily.","title":"TupleToolApplyIsolation"},{"location":"software_manuals/davinci/tuple_tools/#_isolation_type","text":"Among the many variables produced by this tool, these four are about track type of each track: _ISOLATION_Type _ISOLATION_Type2 _ISOLATION_Type3 _ISOLATION_Type4 Note These four tracks are the ones with the best BDT scores. For each of these variables, it admits 3 possible values of type float : 1.0 : VELO only, with no other compatible segments found 3.0 : Forward tracks, which are VELO+(TT)+downstream segment (TT hits optional) 4.0 : Upstream tracks, VELO+TT Note The type 1.0 tracks can be turned off by commenting out the following lines in reco_Dst.py : # Provide required information for VELO pions. ms_all_protos = ChargedProtoParticleMaker ( name = 'MyProtoPMaker' ) ms_all_protos . Inputs = [ 'Rec/Track/Best' ] ms_all_protos . Output = 'Rec/ProtoP/MyProtoPMaker/ProtoParticles' # This TES location will be accessible for all selection algorithms # VELO pions for Greg's isolation tool. # NOTE: The name 'StdNoPIDsVeloPions' is hard-coded in the tuple tool, so the # name should not be changed. ms_velo_pions = NoPIDsParticleMaker ( 'StdNoPIDsVeloPions' , Particle = 'pion' ) ms_velo_pions . Input = ms_all_protos . Output # NOTE: These two lines are needed to select particles in VELO only. # NOTE: DARK MAGIC. trackSelector ( ms_velo_pions , trackTypes = [ 'Velo' ]) updateDoD ( ms_velo_pions ) DaVinci () . appendToMainSequence ([ ms_all_protos , ms_velo_pions ])","title":"_ISOLATION_Type"}]}